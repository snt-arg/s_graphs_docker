/*! 
 * Master Slider WordPress Panel 
 * Copyright Â© 2022 All Rights Reserved. 
 *
 * @author Averta [www.averta.net]
 * @version 2.81.11
 * @date Feb 2022
 */
window.MSPanel=Ember.Application.create({rootElement:"#msp-root"}),MSPanel.version="2.81.11",MSPanel.SliderID=parseQueryString(window.location.search).slider_id||__MSP_SLIDER_ID||"100",MSPanel.SliderSlug=__MSP_SLIDER_ALIAS||"ms-"+MSPanel.SliderID,MSPanel.dependedControllers=[],("flickr"===__MSP_TYPE||"post"===__MSP_TYPE||"facebook"===__MSP_TYPE||"wc-product"===__MSP_TYPE)&&(MSPanel.dynamicTags=[]),String.prototype.jfmt=function(){return"".fmt.apply(this.replace(/%s|%d/,"%@"),arguments)},window.$=jQuery.noConflict(),jQuery.ui.dialog.prototype._focusTabbable=function(){},MSPanel.Router.map(function(){this.resource("settings"),this.resource("slides",{path:"/"}),this.resource("controls"),this.resource("callbacks"),this.resource("error"),"flickr"===__MSP_TYPE&&this.resource("flickr"),"facebook"===__MSP_TYPE&&this.resource("facebook"),"post"===__MSP_TYPE&&this.resource("post"),"wc-product"===__MSP_TYPE&&this.resource("wcproduct")}),MSPanel.Router.reopen({location:"none"}),MSPanel.ApplicationRoute=Ember.Route.extend({model:function(){var setting=MSPanel.Settings.find();0===setting.get("length")&&MSPanel.Settings.create().save()}}),MSPanel.SettingsRoute=Ember.Route.extend({model:function(){return MSPanel.Settings.find(1)},setupController:function(controller,model){controller.set("model",model),controller.setup()}}),"flickr"===__MSP_TYPE&&(MSPanel.FlickrRoute=Ember.Route.extend({deactivate:function(){this.controllerFor("flickr").onDeactivate()}}),MSPanel.dependedControllers.push(function(){this.controllerFor("flickr").set("model",MSPanel.Settings.find(1)),this.controllerFor("flickr").setup()})),"facebook"===__MSP_TYPE&&(MSPanel.FacebookRoute=Ember.Route.extend({deactivate:function(){this.controllerFor("facebook").onDeactivate()}}),MSPanel.dependedControllers.push(function(){this.controllerFor("facebook").set("model",MSPanel.Settings.find(1)),this.controllerFor("facebook").setup()})),"post"===__MSP_TYPE&&(MSPanel.PostRoute=Ember.Route.extend({deactivate:function(){this.controllerFor("post").onDeactivate()}}),MSPanel.dependedControllers.push(function(){this.controllerFor("post").set("model",MSPanel.Settings.find(1)),this.controllerFor("post").setup()})),"wc-product"===__MSP_TYPE&&(MSPanel.WcproductRoute=Ember.Route.extend({deactivate:function(){this.controllerFor("wcproduct").onDeactivate()}}),MSPanel.dependedControllers.push(function(){this.controllerFor("wcproduct").set("model",MSPanel.Settings.find(1)),this.controllerFor("wcproduct").setup()})),MSPanel.SlidesRoute=Ember.Route.extend({model:function(){return MSPanel.Slide.find()},setupController:function(controller,model){controller.set("model",model),controller.set("sliderSettings",MSPanel.Settings.find(1));var stylesController=MSPanel.StylesController.create({model:MSPanel.Style.find(),presetStyles:MSPanel.PresetStyle.find(),parent:controller}),effectsController=MSPanel.EffectsController.create({model:MSPanel.Effect.find(),presetEffects:MSPanel.PresetEffect.find(),parent:controller,container:MSPanel.__container__}),buttonsController=MSPanel.ButtonsController.create({model:MSPanel.ButtonStyle.find(),parent:controller,container:MSPanel.__container__});controller.set("stylesController",stylesController),controller.set("effectsController",effectsController),controller.set("buttonsController",buttonsController),controller.setup(),MSPanel.dependedControllers.length>0&&Ember.run.scheduleOnce("afterRender",this,this.setupDependedControllers)},setupDependedControllers:function(){for(var i=0,l=MSPanel.dependedControllers.length;i!==l;i++)MSPanel.dependedControllers[i].call(this)}}),MSPanel.ControlsRoute=Ember.Route.extend({model:function(){return MSPanel.Control.find()},setupController:function(controller,model){controller.set("model",model),controller.setup(),this.activate()},activate:function(){var controller=this.get("controller");controller&&controller.set("controlOptions","empty-template")}}),MSPanel.CallbacksRoute=Ember.Route.extend({model:function(){return MSPanel.Callback.find()},setupController:function(controller,model){controller.set("model",model),controller.setup()}}),function(){var attr=Ember.attr,hasMany=Ember.hasMany,belongsTo=Ember.belongsTo,regp=/https\:|http\:/,WPPath={serialize:function(path){return void 0==path?path:regp.test(path)?path.replace(__MS.upload_dir,""):path.replace("/wp-content/uploads","")},deserialize:function(path){return void 0==path?path:regp.test(path)?path:__MS.upload_dir+path}},defaults=window.__MSP_DEF_OPTIONS||{};MSPanel.Settings=Ember.Model.extend({id:attr("number"),snapping:attr("boolean",{defaultValue:!0}),bgImageThumb:attr(WPPath),disableControls:attr("boolean",{defaultValue:!1}),name:attr("string",{defaultValue:__MSP_LAN.sm_001}),slug:attr("string"),width:attr("number",{defaultValue:defaults.width||1e3}),height:attr("number",{defaultValue:defaults.height||500}),wrapperWidth:attr("number"),minHeight:attr("number"),wrapperWidthUnit:attr("string",{defaultValue:"px"}),autoCrop:attr("boolean",{defaultValue:defaults.autoCrop||!1}),type:attr("string"),sliderId:attr("string"),autofillTarget:attr("string"),responsiveSize:attr("boolean",{defaultValue:!1}),tabletWidth:attr("number",{defaultValue:defaults.tabletWidth||768}),tabletHeight:attr("number"),phoneWidth:attr("number",{defaultValue:defaults.phoneWidth||480}),phoneHeight:attr("number"),enableOverlayLayers:attr("boolean",{defaultValue:defaults.enableOverlayLayers||!0}),layout:attr("string",{defaultValue:defaults.layout||"boxed"}),autoHeight:attr("boolean",{defaultValue:defaults.autoHeight||!1}),trView:attr("string",{defaultValue:defaults.transition||"basic"}),speed:attr("number",{defaultValue:defaults.speed||20}),space:attr("number",{defaultValue:defaults.space||0}),start:attr("number",{defaultValue:defaults.start}),grabCursor:attr("boolean",{defaultValue:defaults.grabCursor}),swipe:attr("boolean",{defaultValue:defaults.swipe}),mouse:attr("boolean",{defaultValue:defaults.mouse}),wheel:attr("boolean",{defaultValue:defaults.wheel}),keyboard:attr("boolean",{defaultValue:defaults.keyboard}),autoplay:attr("boolean",{defaultValue:defaults.autoplay}),loop:attr("boolean",{defaultValue:defaults.loop}),shuffle:attr("boolean",{defaultValue:defaults.shuffle}),preload:attr("string",{defaultValue:defaults.preload}),overPause:attr("boolean",{defaultValue:defaults.overPause}),endPause:attr("boolean",{defaultValue:defaults.endPause}),hideLayers:attr("boolean",{defaultValue:defaults.hideLayers}),dir:attr("string",{defaultValue:defaults.dir}),parallaxMode:attr("srting",{defaultValue:defaults.parallaxMode}),useDeepLink:attr("string",{defaultValue:!1}),deepLink:attr("string"),deepLinkType:attr("string",{defaultValue:"path"}),mobileBGVideo:attr("boolean",{defaultValue:defaults.mobileBGVideo}),startOnAppear:attr("boolean",{defaultValue:defaults.startOnAppear}),scrollParallax:attr("boolean"),scrollParallaxMove:attr("number",{defaultValue:30}),scrollParallaxBGMove:attr("number",{defaultValue:50}),scrollParallaxFade:attr("boolean",{defaultValue:!0}),centerControls:attr("boolean",{defaultValue:defaults.centerControls}),instantShowLayers:attr("boolean",{defaultValue:defaults.instantShowLayers}),fullscreenMargin:attr("number"),inlineStyle:attr("string"),className:attr("string",{defaultValue:defaults.className}),bgColor:attr("string"),bgImage:attr(WPPath),customStyle:attr("string"),skin:attr("string",{defaultValue:defaults.skin}),msTemplate:attr("string",{defaultValue:"custom"}),msTemplateClass:attr("string",{defaultValue:""}),usedFonts:attr("string"),fbtoken:attr("string"),apiKey:attr("string"),setId:attr("string"),setType:attr("string"),imgCount:attr("number"),thumbSize:attr("srting"),imgSize:attr("string"),postType:attr("string"),postCats:attr(Array),postTags:attr(Array),postCount:attr("number"),postImageType:attr("string"),postOrder:attr("string"),postOrderDir:attr("string"),postExcerptLen:attr("number"),postExcludeIds:attr("string"),postExcludeNoImg:attr("boolean"),postIncludeIds:attr("string"),postOffset:attr("number"),postLinkSlide:attr("boolean"),postLinkTarget:attr("string"),postSlideBg:attr("string"),postSlideBgthumb:attr("string"),wcOnlyInstock:attr("boolean"),wcOnlyFeatured:attr("boolean"),wcOnlyOnsale:attr("boolean")}),MSPanel.Slide=Ember.Model.extend({id:attr("number"),timeline_h:attr("number",{defaultValue:200}),bgThumb:attr(WPPath),thumbOrginal:attr(WPPath),isOverlayLayers:attr("boolean",{defaultValue:!1}),order:attr("number"),ishide:attr("boolean"),bg:attr(WPPath),duration:attr("number",{defaultValue:defaults.duration||3}),msId:attr("string"),fillMode:attr("string",{defaultValue:defaults.slideFillMode||"fill"}),thumb:attr(WPPath),info:attr("string"),link:attr("string"),linkTarget:attr("string"),linkTitle:attr("string"),linkRel:attr("string"),linkClass:attr("string"),linkId:attr("string"),video:attr("string"),bgColor:attr("string"),autoplayVideo:attr("boolean"),pattern:attr("string"),colorOverlay:attr("string"),bgv_mp4:attr("string"),bgv_ogg:attr("string"),bgv_webm:attr("string"),bgv_fillmode:attr("string",{defaultValue:defaults.sliderVideoFillMode||"fill"}),bgv_loop:attr("boolean",{defaultValue:defaults.slideVideoLoop}),bgv_mute:attr("boolean",{defaultValue:defaults.slideVideoMute}),bgv_autopause:attr("boolean",{defaultValue:defaults.slideVideoAutopause}),cssId:attr("string"),cssClass:attr("string"),bgAlt:attr("string"),bgTitle:attr("string"),layers:hasMany("MSPanel.Layer",{key:"layer_ids"})}),MSPanel.Layer=Ember.Model.extend({id:attr("number"),name:attr("string"),isLocked:attr("boolean",{defaultValue:!1}),isHided:attr("boolean",{defaultValue:!1}),isSoloed:attr("boolean",{defaultValue:!1}),slide:belongsTo("MSPanel.Slide",{key:"slide"}),styleModel:belongsTo("MSPanel.Style",{key:"styleModel",embedded:!1}),showEffect:belongsTo("MSPanel.Effect",{key:"showEffect",embedded:!1}),showTransform:attr("string",{defaultValue:""}),showOrigin:attr("string",{defaultValue:""}),showFade:attr("boolean",{defaultValue:!0}),hideEffect:belongsTo("MSPanel.Effect",{key:"hideEffect",embedded:!1}),hideTransform:attr("string",{defaultValue:""}),hideOrigin:attr("string",{defaultValue:""}),hideFade:attr("boolean",{defaultValue:!0}),imgThumb:attr(WPPath),stageOffsetX:attr("number",{defaultValue:0}),stageOffsetY:attr("number",{defaultValue:0}),order:attr("number"),type:attr("string"),position:attr("string",{defaultValue:"normal"}),msId:attr("string"),cssClass:attr("string"),cssId:attr("string"),title:attr("string"),rel:attr("string"),noSwipe:attr("string",{defaultValue:!1}),content:attr("string",{defaultValue:defaults.layerContent||"Lorem Ipsum"}),img:attr(WPPath),imgAlt:attr("string"),video:attr("string",{defaultValue:"http://player.vimeo.com/video/11721242"}),align:attr("string",{defaultValue:"top"}),useAction:attr("boolean",{defaultValue:!1}),action:attr("string"),toSlide:attr("number"),link:attr("string"),linkTarget:attr("string"),scrollDuration:attr("number",{defaultValue:2}),scrollTarget:attr("string"),actionTargetLayer:attr("string"),offsetX:attr("number",{defaultValue:0}),offsetY:attr("number",{defaultValue:0}),width:attr("number"),height:attr("number"),resize:attr("boolean",{defaultValue:!0}),fixed:attr("boolean",{defaultValue:!1}),widthlimit:attr("number",{defaultValue:"0"}),origin:attr("string",{defaultValue:"tl"}),tabletOffsetY:attr("number"),tabletOffsetX:attr("number"),tabletOrigin:attr("string"),phoneOffsetX:attr("number"),phoneOffsetY:attr("number"),phoneOrigin:attr("string"),hideOn:attr("string"),stayHover:attr("boolean",{defaultValue:!0}),className:attr("string"),parallax:attr("string"),wait:attr("boolean",{defaultValue:defaults.layerWait}),masked:attr("boolean"),maskCustomSize:attr("boolean"),maskWidth:attr("number"),maskHeight:attr("number"),overlayTargetSlides:attr("string"),overlayTargetSlidesAction:attr("string",{defaultValue:"show"}),showDuration:attr("number",{defaultValue:1}),showDelay:attr("number",{defaultValue:0}),showEase:attr("string",{defaultValue:"easeOutQuint"}),showEffFunc:attr("string"),useHide:attr("boolean",{defaultValue:!1}),hideDuration:attr("number",{defaultValue:1}),hideDelay:attr("number",{defaultValue:1}),hideEase:attr("string",{defaultValue:"easeOutQuint"}),hideEffFunc:attr("string"),btnClass:attr("string",{defaultValue:"ms-btn ms-default-btn"}),autoplayVideo:attr("boolean")}),MSPanel.Style=Ember.Model.extend({id:attr("number"),name:attr("string"),type:attr("string"),className:attr("string"),backgroundColor:attr("string"),paddingTop:attr("number"),paddingRight:attr("number"),paddingBottom:attr("number"),paddingLeft:attr("number"),borderTop:attr("number"),borderRight:attr("number"),borderBottom:attr("number"),borderLeft:attr("number"),borderColor:attr("string"),borderRadius:attr("number"),borderStyle:attr("string"),fontFamily:attr("string"),fontWeight:attr("string",{defaultValue:"normal"}),fontSize:attr("number"),textAlign:attr("string"),letterSpacing:attr("number"),lineHeight:attr("string",{defaultValue:"normal"}),whiteSpace:attr("string"),color:attr("string"),custom:attr("string")}),MSPanel.PresetStyle=MSPanel.Style.extend({}),MSPanel.Effect=Ember.Model.extend({id:attr("number"),name:attr("string"),type:attr("string"),fade:attr("boolean",{defaultValue:!0}),translateX:attr("number"),translateY:attr("number"),translateZ:attr("number"),scaleX:attr("number"),scaleY:attr("number"),rotate:attr("number"),rotateX:attr("number"),rotateY:attr("number"),rotateZ:attr("number"),skewX:attr("number"),skewY:attr("number"),originX:attr("number"),originY:attr("number"),originZ:attr("number")}),MSPanel.PresetEffect=MSPanel.Effect.extend({}),MSPanel.Control=Ember.Model.extend({id:attr("number"),label:attr("string"),name:attr("string"),autoHide:attr("boolean",{defaultValue:!0}),overVideo:attr("boolean",{defaultValue:!0}),cssClass:attr("string"),cssId:attr("string"),margin:attr("number"),dir:attr("string"),color:attr("string"),radius:attr("number"),stroke:attr("number"),speed:attr("number"),space:attr("number"),type:attr("string"),insertThumb:attr("boolean"),arrows:attr("boolean"),hoverChange:attr("boolean"),width:attr("number"),height:attr("number"),align:attr("string"),inset:attr("boolean"),size:attr("number"),hideUnder:attr("number"),fillMode:attr("string")}),MSPanel.Callback=Ember.Model.extend({id:attr("number"),label:attr("string"),name:attr("string"),content:attr("string",{defaultValue:"function(event){\n  var api = event.target;\n}"})}),MSPanel.ButtonStyle=Ember.Model.extend({id:attr("number"),className:attr("string"),normal:attr("string"),hover:attr("string"),active:attr("string"),style:attr("string",{defaultValue:"ms-btn-box"}),size:attr("string",{defaultValue:"ms-btn-n"})});var decodeFix=function(str){var decoded=B64.decode(str);return decoded.slice(0,decoded.lastIndexOf("}")+1)};MSPanel.data=__MSP_DATA?JSON.parse(decodeFix(__MSP_DATA)):{meta:{}},MSPanel.PSData=__MSP_PRESET_STYLE?JSON.parse(decodeFix(__MSP_PRESET_STYLE)):{meta:{}},MSPanel.PEData=__MSP_PRESET_EFFECT?JSON.parse(decodeFix(__MSP_PRESET_EFFECT)):{meta:{}},MSPanel.PBData=__MSP_PRESET_BUTTON?JSON.parse(decodeFix(__MSP_PRESET_BUTTON)):{meta:{}},MSPanel.Settings.adapter=Ember.OfflineAdapter.create({applicationData:MSPanel.data}),MSPanel.Slide.adapter=Ember.OfflineAdapter.create({applicationData:MSPanel.data}),MSPanel.Layer.adapter=Ember.OfflineAdapter.create({applicationData:MSPanel.data}),MSPanel.Style.adapter=Ember.OfflineAdapter.create({applicationData:MSPanel.data}),MSPanel.Effect.adapter=Ember.OfflineAdapter.create({applicationData:MSPanel.data}),MSPanel.Control.adapter=Ember.OfflineAdapter.create({applicationData:MSPanel.data}),MSPanel.Callback.adapter=Ember.OfflineAdapter.create({applicationData:MSPanel.data}),MSPanel.PresetStyle.adapter=Ember.OfflineAdapter.create({applicationData:MSPanel.PSData}),MSPanel.PresetEffect.adapter=Ember.OfflineAdapter.create({applicationData:MSPanel.PEData}),MSPanel.ButtonStyle.adapter=Ember.OfflineAdapter.create({applicationData:MSPanel.PBData})}(),MSPanel.SliderTemplates=[{name:"Custom Template",value:"custom",className:"",img:__MSP_PATH+"images/templates/custom.gif",controls:null},{name:"3D Flow Carousel",value:"3d-flow-carousel",className:"ms-caro3d-template",img:__MSP_PATH+"images/templates/3d-flow-carousel.png",settings:{space:0,loop:!0,trView:"flow",layout:"partialview",dir:"h",wheel:!1},controls:null},{name:"3D Wave Carousel",value:"3d-wave-carousel",className:"ms-caro3d-template",img:__MSP_PATH+"images/templates/3d-wave-carousel.png",settings:{space:0,loop:!0,trView:"flow",layout:"partialview",dir:"h",wheel:!1},controls:null},{name:"Image Gallery with Thumbs",value:"image-gallery",className:"ms-gallery-template",img:__MSP_PATH+"images/templates/image-gallery.png",settings:{space:0,trView:"basic",skin:"ms-skin-black-2 round-skin"},controls:null,disableControls:!0},{name:"Slider with Bottom Aligned Thumbs",value:"slider-horizontal-thumbs",className:"ms-thumbs-template",img:__MSP_PATH+"images/templates/slider-bottom-thumbs.png",settings:{trView:"scale",space:0},controls:{arrows:{},scrollbar:{dir:"h"},thumblist:{autohide:!1,dir:"h",arrows:!1,align:"bottom",width:127,height:137,margin:5,space:5}}},{name:"Slider with Top Aligned Thumbs",value:"slider-top-thumbs",className:"ms-thumbs-template",img:__MSP_PATH+"images/templates/slider-top-thumbs.png",settings:{trView:"scale",space:0},controls:{arrows:{},scrollbar:{dir:"h"},thumblist:{autohide:!1,dir:"h",arrows:!1,align:"top",width:127,height:137,margin:5,space:5}}},{name:"Slider with Right Aligned Thumbs",value:"slider-vertical-thumbs",className:"ms-thumbs-template",img:__MSP_PATH+"images/templates/slider-right-thumbs.png",settings:null,controls:{arrows:{},scrollbar:{dir:"v"},thumblist:{autohide:!1,dir:"v",arrows:!1,align:"right",width:127,height:137,margin:5,space:5}}},{name:"Slider with Left Aligned Thumbs",value:"slider-left-thumbs",className:"ms-thumbs-template",img:__MSP_PATH+"images/templates/slider-left-thumbs.png",settings:null,controls:{arrows:{},scrollbar:{dir:"v"},thumblist:{autohide:!1,dir:"v",arrows:!1,align:"left",width:127,height:137,margin:5,space:5}}},{name:"Slider with Horizontal Tabs",value:"slider-horizontal-tabs",className:"ms-tabs-template",img:__MSP_PATH+"images/templates/slider-horizontal-tabs.png",settings:null,controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},thumblist:{autohide:!1,dir:"h",type:"tabs",width:240,height:120,align:"bottom",space:0,margin:-12,hideUnder:400}}},{name:"Slider with Vertical Tabs",value:"slider-vertical-tabs",className:"ms-tabs-template",img:__MSP_PATH+"images/templates/slider-vertical-tabs.png",settings:null,controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},thumblist:{autohide:!1,dir:"v",type:"tabs",align:"right",margin:-12,space:0,width:229,height:100,hideUnder:550}}},{name:"Partial View Slider V1",value:"partial-1",className:"ms-partialview-template",img:__MSP_PATH+"images/templates/partial-1.png",settings:{space:10,loop:!0,trView:"partialWave",layout:"partialview",dir:"h"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},slideinfo:{autohide:!1,align:"bottom",size:160}}},{name:"Partial View Slider V2",value:"partial-2",className:"ms-partialview-template",img:__MSP_PATH+"images/templates/partial-2.png",settings:{space:10,loop:!0,trView:"fadeWave",layout:"partialview",dir:"h"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},slideinfo:{autohide:!1,align:"bottom",size:160}}},{name:"Partial View Slider V3",value:"partial-3",className:"ms-partialview-template",img:__MSP_PATH+"images/templates/partial-3.png",settings:{space:10,loop:!0,trView:"fadeFlow",layout:"partialview",dir:"h"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},slideinfo:{autohide:!1,align:"bottom",size:160}}},{name:"Slider in Display",value:"display",className:"ms-display-template",img:__MSP_PATH+"images/templates/display.png",settings:{width:507,height:286,speed:20,space:2,trView:"flow",dir:"h",layout:"boxed"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},bullets:{autohide:!1}},disableControls:!0},{name:"Slider in Flat Display",value:"flat-display",className:"ms-display-template",img:__MSP_PATH+"images/templates/flat-display.png",settings:{width:507,height:286,speed:20,space:2,trView:"flow",dir:"h",layout:"boxed"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},bullets:{autohide:!1}},disableControls:!0},{name:"Slider in Laptop",value:"laptop",className:"ms-laptop-template",img:__MSP_PATH+"images/templates/laptop.png",settings:{width:492,height:309,speed:20,space:2,trView:"mask",dir:"h",layout:"boxed"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},bullets:{autohide:!1}},disableControls:!0},{name:"Slider in Flat Laptop",value:"flat-laptop",className:"ms-laptop-template",img:__MSP_PATH+"images/templates/flat-laptop.png",settings:{width:492,height:309,speed:20,space:2,trView:"mask",dir:"h",layout:"boxed"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},bullets:{autohide:!1}},disableControls:!0},{name:"Slider in Tablet",value:"tablet",className:"ms-tablet-template",img:__MSP_PATH+"images/templates/tablet.png",settings:{width:400,height:534,speed:20,space:2,trView:"wave",dir:"h",layout:"boxed"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},bullets:{autohide:!1}},disableControls:!0},{name:"Slider in Flat Tablet",value:"flat-tablet",className:"ms-tablet-template",img:__MSP_PATH+"images/templates/flat-tablet.png",settings:{width:400,height:534,speed:20,space:2,trView:"basic",dir:"h",layout:"boxed"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},bullets:{autohide:!1}},disableControls:!0},{name:"Slider in Landscape Tablet",value:"tablet-land",className:"ms-tablet-template ms-tablet-land",img:__MSP_PATH+"images/templates/tablet-land.png",settings:{width:632,height:476,speed:20,space:2,trView:"mask",dir:"h",layout:"boxed"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},bullets:{autohide:!1}},disableControls:!0},{name:"Slider in Flat Landscape Tablet",value:"flat-tablet-land",className:"ms-tablet-template ms-tablet-land",img:__MSP_PATH+"images/templates/flat-tablet-land.png",settings:{width:632,height:476,speed:20,space:2,trView:"mask",dir:"h",layout:"boxed"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},bullets:{autohide:!1}},disableControls:!0},{name:"Slider in Smart Phone",value:"phone",className:"ms-phone-template",img:__MSP_PATH+"images/templates/phone.png",settings:{width:258,height:456,speed:20,space:2,trView:"wave",dir:"h",layout:"boxed"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},bullets:{autohide:!1}},disableControls:!0},{name:"Slider in Flat Smart Phone",value:"flat-phone",className:"ms-phone-template",img:__MSP_PATH+"images/templates/flat-phone.png",settings:{width:258,height:456,speed:20,space:2,trView:"basic",dir:"h",layout:"boxed"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},bullets:{autohide:!1}},disableControls:!0},{name:"Slider in Landscape Smart Phone",value:"phone-land",className:"ms-phone-template ms-phone-land",img:__MSP_PATH+"images/templates/phone-land.png",settings:{width:456,height:258,speed:20,space:2,trView:"mask",dir:"h",layout:"boxed"},controls:{arrows:{},circletimer:{color:"#FFFFFF",stroke:9},bullets:{autohide:!1}},disableControls:!0},{name:"Slider in Flat Landscape Smart Phone",value:"flat-phone-land",className:"ms-phone-template ms-phone-land",img:__MSP_PATH+"images/templates/flat-phone-land.png",settings:{width:456,height:258,speed:20,space:2,trView:"mask",dir:"h",layout:"boxed"},controls:{arrows:{},bullets:{autohide:!1}},disableControls:!0},{name:"Vertical Slider",value:"vertical-slider",className:"ms-vertical-template",img:__MSP_PATH+"images/templates/vertical-slider.png",settings:{space:5,dir:"v"},controls:{arrows:{},scrollbar:{dir:"v"},circletimer:{color:"#FFFFFF",stroke:9},thumblist:{autohide:!1,dir:"v",space:5,margin:5,align:"right"}}},{name:"Staff Carousel V1",value:"staff-1",className:"ms-staff-carousel",img:__MSP_PATH+"images/templates/staff-1.png",settings:{loop:!0,width:240,height:240,speed:20,trView:"focus",layout:"partialview",space:0,wheel:!0,dir:"h"},controls:{arrows:{},slideinfo:{autohide:!1,align:"bottom",size:160}}},{name:"Staff Carousel V2",value:"staff-2",className:"ms-staff-carousel",img:__MSP_PATH+"images/templates/staff-2.png",settings:{loop:!0,width:240,height:240,speed:20,trView:"fadeBasic",layout:"partialview",space:0,dir:"h"},controls:{arrows:{},slideinfo:{autohide:!1,align:"bottom",size:160}}},{name:"Staff Carousel V3",value:"staff-3",className:"ms-staff-carousel ms-round",img:__MSP_PATH+"images/templates/staff-3.png",settings:{loop:!0,width:240,height:240,speed:20,trView:"focus",layout:"partialview",space:0,space:35,dir:"h"},controls:{arrows:{},slideinfo:{autohide:!1,align:"bottom",size:160}}},{name:"Staff Carousel V4",value:"staff-4",className:"ms-staff-carousel ms-round",img:__MSP_PATH+"images/templates/staff-4.png",settings:{loop:!0,width:240,height:240,speed:20,trView:"fadeBasic",layout:"partialview",space:0,space:45,dir:"h"},controls:{arrows:{},slideinfo:{autohide:!1,align:"bottom",size:160}}},{name:"Staff Carousel V5",value:"staff-5",className:"ms-staff-carousel",img:__MSP_PATH+"images/templates/staff-5.png",settings:{loop:!0,width:240,height:240,speed:20,trView:"wave",layout:"partialview",space:0,wheel:!0,dir:"h"},controls:{arrows:{},slideinfo:{autohide:!1,align:"bottom",size:160}}},{name:"Staff Carousel V6",value:"staff-6",className:"ms-staff-carousel",img:__MSP_PATH+"images/templates/staff-6.png",settings:{loop:!0,width:240,height:240,speed:20,trView:"flow",layout:"partialview",space:0,wheel:!0,dir:"h"},controls:{arrows:{},slideinfo:{autohide:!1,align:"bottom",size:160}}}],MSPanel.Settings.FIXTURES=[{id:1,name:"slider 1"}],MSPanel.Slide.FIXTURES=[],MSPanel.Layer.FIXTURES=[],MSPanel.Style.FIXTURES=[],MSPanel.SlideFrame=Ember.View.extend({classNames:["msp-slideframe"],classNameBindings:["selected:active"],selected:!1,thumb_src:"",showbtnclass:"msp-ico msp-ico-whitehide",template:Ember.Handlebars.compile('<div class="msp-img-cont">{{#if view.hasImg}}<div class="msp-imgselect-preview" {{bind-attr style=view.preview}}></div>{{/if}}</div><span class="msp-frame-slideorder">#{{view.order}}</span><div class="msp-framehandle"><ul><li><a title="'+__MSP_LAN.ui_001+'" href="#" {{action "hideswitch" target=view}}><span {{bind-attr class=view.showbtnclass}}></span></a></li><li><a title="'+__MSP_LAN.ui_002+'" href="#" {{action "duplicate" target=view}}><span class="msp-ico msp-ico-whiteduplicate"></span></a></li><li><a title="'+__MSP_LAN.ui_003+'" href="#" {{action "remove" target=view}}><span class="msp-ico msp-ico-whiteremove"></span></a></li></ul></div>'),click:function(){this.get("controller").send("select",this.get("slide"))},onValueChanged:function(){var hasImg=!Ember.isEmpty(this.get("slide.bg")),hasThumb=!Ember.isEmpty(this.get("slide.thumb"));this.beginPropertyChanges(),this.set("hasImg",hasImg||hasThumb),hasImg?this.set("preview","background-image:url("+this.get("slide.bgThumb")+");"):hasThumb&&this.set("preview","background-image:url("+this.get("slide.thumb")+");"),this.endPropertyChanges()}.observes("slide.bg","slide.thumb").on("didInsertElement"),onSelect:function(){var slide=this.get("slide");this.set("selected",slide===this.get("controller.currentSlide"))}.observes("controller.currentSlide").on("init"),hideChange:function(){this.get("slide.ishide")?this.set("showbtnclass","msp-ico msp-ico-whitehide msp-ico-whiteshow"):this.set("showbtnclass","msp-ico msp-ico-whitehide")}.observes("slide.ishide").on("init"),order:function(){return this.get("slide.order")+1}.property("slide.order"),actions:{duplicate:function(){this.get("controller").duplicateSlide(this.get("slide"))},hideswitch:function(){this.set("slide.ishide",!this.get("slide.ishide"))},remove:function(){confirm(__MSP_LAN.ui_004)&&this.get("controller").removeSlide(this.get("slide"))}}}),MSPanel.SlideList=Ember.View.extend({tagName:"div",classNames:["msp-slides-container"],template:Ember.Handlebars.compile('<div {{bind-attr class="view.overlaySelected:active :msp-slideframe :msp-overlay-layers "}} {{action "switchToOverlays" target=view}}>   <div class="msp-img-cont">   </div>   <span class="msp-frame-slideorder">'+(__MSP_LAN.ui_044||"Overlay Layers")+'</span> <div class="msp-framehandle"></div></div> <div class="msp-slide-spliter"></div><ul class="msp-slides sortable">{{#each item in controller}}{{#if item.isOverlayLayers}}{{else}}<li class="msp-slideframe-item" {{bind-attr data-id=item.id}}>{{view MSPanel.SlideFrame slide=item}}</li>{{/if}}{{/each}}<li class="msp-addslide-cont"><div class="msp-addslide" {{action "addSlides"}}><span class="msp-ico msp-ico-grayaddlarge"></span><span class="msp-addslide-label">Add Slide</span></div></li> </ul>'),didInsertElement:function(){var that=this;this.$().find(".sortable").sortable({placeholder:"msp-frames-srtplaceholder",items:">li:not(.msp-addslide-cont)",delay:100,update:function(){that.updateSort()},create:function(){that.updateSort()}})},updateSort:function(){var indexes={};$(".msp-slideframe-item").each(function(index){indexes[$(this).data("id")]=index}),this.$().find(".sortable").sortable("cancel"),this.get("controller").updateSlidesSort(indexes)},onSelect:function(){this.set("overlaySelected",this.get("controller.currentSlide.isOverlayLayers"))}.observes("controller.currentSlide").on("init"),actions:{switchToOverlays:function(){this.get("controller.currentSlide.isOverlayLayers")||this.set("controller.currentSlide",this.get("controller.overlayLayersSlide"))}}}),MSPanel.ImgSelect=Ember.View.extend({classNames:["msp-imgselect"],value:"",hasImg:!1,frame:null,slideBg:!1,template:Ember.Handlebars.compile('<div class="msp-img-cont">{{#if view.hasImg}}<div class="msp-imgselect-preview" {{bind-attr style=view.preview}})"></div>{{/if}}</div>{{#if view.hasImg}}<button {{action removeImg target="view"}} class="msp-img-btn"><span class="msp-ico msp-ico-grayremove"></span></button>{{else}}<button {{action addImg target="view"}} class="msp-img-btn"><span class="msp-ico msp-ico-grayadd"></span></button>{{/if}}'),willDestroyElement:function(){var frame=this.get("frame");frame&&(frame.detach(),frame.remove(),frame=null,this.set("frame",null))},onValueChanged:function(){this.beginPropertyChanges(),this.set("hasImg",!Ember.isEmpty(this.get("value"))),this.set("preview","background-image:url("+this.get("thumb")+");"),this.endPropertyChanges()}.observes("value").on("didInsertElement"),actions:{removeImg:function(){this.beginPropertyChanges(),this.set("value",void 0),this.set("thumb",void 0),this.endPropertyChanges()},addImg:function(){if("undefined"!=typeof wp){var that=this,frame=this.get("frame");if(frame)return void frame.open();var frame=wp.media.frames.frame=wp.media({title:"Select Image",multiple:!1,frame:"select",library:{type:"image"},button:{text:"Add Image"}});frame.on("select",function(){var attachment=frame.state().get("selection").first().toJSON();that.set("thumb",(attachment.sizes.thumbnail||attachment.sizes.full).url),that.set("value",attachment.url)}),frame.open(),this.set("frame",frame)}}}}),MSPanel.Select=Ember.Select.extend({tagName:"div",classNames:["msp-ddlist"],layout:Ember.Handlebars.compile("<select>{{yield}}</select>"),value:null,width:100,didInsertElement:function(){var that=this;this.$("select").on("change",function(){var option=that.$("select option:selected");that.set("value",option.attr("value"))}).width(this.get("width")),this.onValueChanged()},onValueChanged:function(){Ember.isEmpty(this.get("value"))||this.$("select").val(this.get("value"))}.observes("value")}),MSPanel.URLTarget=MSPanel.Select.extend({onInit:function(){var contents=[{lable:__MSP_LAN.ui_005,value:"_self"},{lable:__MSP_LAN.ui_006,value:"_blank"},{lable:__MSP_LAN.ui_007,value:"_parent"},{lable:__MSP_LAN.ui_008,value:"_top"}];this.set("content",contents),this.set("optionValuePath","content.value"),this.set("optionLabelPath","content.lable"),this.set("width",200)}.on("init")}),MSPanel.Fillmode=Ember.View.extend({classNames:["msp-fill-dd"],type:"slide",value:"fill",index:1,template:Ember.Handlebars.compile("<select>{{#each item in view.contents}}<option {{bind-attr value=item.value data-imagesrc=item.img}}>{{item.text}}</option>{{/each}}</select>"),didInsertElement:function(){var that=this,isFirst=!0;
this.$("select").ddslick({width:154,onSelected:function(selected){!isFirst&&that.set("value",selected.selectedData.value),isFirst=!1}}),this.onValueChanged()},onValueChanged:function(){Ember.isEmpty(this.get("value"))||this.$(".dd-container").ddslick("select",{index:this.get("valuedic")[this.get("value")]})}.observes("value"),onInit:function(){var contents,valuedic;"slide"===this.get("type")?(contents=[{value:"fill",text:__MSP_LAN.ui_009,img:__MSP_PATH+"images/fill.png"},{value:"fit",text:__MSP_LAN.ui_010,img:__MSP_PATH+"images/fit.png"},{value:"center",text:__MSP_LAN.ui_011,img:__MSP_PATH+"images/center.png"},{value:"stretch",text:__MSP_LAN.ui_012,img:__MSP_PATH+"images/stretch.png"},{value:"tile",text:__MSP_LAN.ui_013,img:__MSP_PATH+"images/tile.png"}],valuedic={fill:0,fit:1,center:2,stretch:3,tile:4}):"video"===this.get("type")&&(contents=[{value:"fill",text:__MSP_LAN.ui_009,img:__MSP_PATH+"images/fill.png"},{value:"fit",text:__MSP_LAN.ui_010,img:__MSP_PATH+"images/fit.png"}],valuedic={fill:0,fit:1,none:2}),this.set("contents",contents),this.set("valuedic",valuedic)}.on("init")}),MSPanel.AddLayer=Ember.View.extend({classNames:["msp-addlayer"],template:Ember.Handlebars.compile('<button {{action newLayer view.value}} class="msp-add-btn msp-addlayer-btn"><span class="msp-ico msp-ico-whiteadd"></span></button><div class="msp-addlayer-dd"><select>{{#each item in view.layertypes}}<option {{bind-attr value=item.value data-imagesrc=item.img}}>{{item.lable}}</option>{{/each}}</select></div>'),didInsertElement:function(){var that=this;this.$().find("select").ddslick({width:154,onSelected:function(selected){that.set("value",selected.selectedData.value)}})},onInit:function(){for(var layertypes=[],clt=this.get("controller.layertypes"),i=0,l=clt.length;i!==l;i++)layertypes.push({value:clt[i].value,lable:clt[i].lable,img:__MSP_PATH+"images/layertypes/"+clt[i].value+".png"});this.set("layertypes",layertypes)}.on("init")}),MSPanel.AlignBtns=Ember.View.extend({classNames:["msp-align-btns"],target:null,template:Ember.Handlebars.compile('<button title="'+__MSP_LAN.ui_015+'" {{action "alignLayer" "top" target=view.target}} class="msp-align-btn"><span class="msp-ico msp-ico-altop"></span></button><button title="'+__MSP_LAN.ui_016+'" {{action "alignLayer" "mid" target=view.target}} class="msp-align-btn"><span class="msp-ico msp-ico-almid"></span></button><button title="'+__MSP_LAN.ui_017+'" {{action "alignLayer" "bot" target=view.target}} class="msp-align-btn"><span class="msp-ico msp-ico-albot"></span></button><div class="msp-btn-space"></div><button title="'+__MSP_LAN.ui_018+'" {{action "alignLayer" "left" target=view.target}} class="msp-align-btn"><span class="msp-ico msp-ico-alleft"></span></button><button title="'+__MSP_LAN.ui_019+'" {{action "alignLayer" "center" target=view.target}} class="msp-align-btn"><span class="msp-ico msp-ico-alcenter"></span></button><button title="'+__MSP_LAN.ui_020+'" {{action "alignLayer" "right" target=view.target}} class="msp-align-btn"><span class="msp-ico msp-ico-alright"></span></button>')}),MSPanel.PositionOrigin=Ember.View.extend({classNames:["msp-origin-control"],layer:null,selectedNode:null,template:Ember.Handlebars.compile('<table><tbody><tr><td title="Top left" class="msp-origin-btn msp-origin-tl" data-origin="tl"></td><td title="Top center" class="msp-origin-btn msp-origin-tc" data-origin="tc"></td><td title="Top right" class="msp-origin-btn msp-origin-tr" data-origin="tr"></td></tr><tr><td title="Middle left" class="msp-origin-btn msp-origin-ml" data-origin="ml"></td><td title="Middle center" class="msp-origin-btn msp-origin-mc" data-origin="mc"></td><td title="Middle right" class="msp-origin-btn msp-origin-mr" data-origin="mr"></td></tr><tr><td title="Bottom left" class="msp-origin-btn msp-origin-bl" data-origin="bl"></td><td title="Bottom center" class="msp-origin-btn msp-origin-bc" data-origin="bc"></td><td title="Bottom right" class="msp-origin-btn msp-origin-br" data-origin="br"></td></tr></tbody></table>'),didInsertElement:function(){var that=this;this.$(".msp-origin-btn").click(function(){const layer=that.get("layer"),bp=that.get("controller.parentController.activeBreakpoint"),origin=MSPanel.getLayerResponsiveOriginKey(bp);Ember.isEmpty(layer)||that.set("layer."+origin,$(this).data("origin"))}),this.onValueChanged()},onValueChanged:function(){var selectedNode=this.get("selectedNode");const bp=this.get("controller.parentController.activeBreakpoint"),layer=this.get("layer");if(Ember.isEmpty(selectedNode)||selectedNode.removeClass("msp-origin-btn-selected"),Ember.isEmpty(layer))return void this.$().addClass("msp-origin-control-disabled");this.$().removeClass("msp-origin-control-disabled");var value=MSPanel.getResponsiveValue(layer,MSPanel.getLayerResponsiveOriginKey,bp),newNode=this.$(".msp-origin-"+value).addClass("msp-origin-btn-selected");this.set("selectedNode",newNode)}.observes("layer","layer.origin","layer.tabletOrigin","layer.phoneOrigin","controller.parentController.activeBreakpoint")}),MSPanel.ResponsiveSwitch=Ember.View.extend({classNames:["msp-responsive-control"],layer:null,selectedNode:null,template:Ember.Handlebars.compile('<button data-value="desktop" class="msp-responsive-btn msp-responsive-btn-desktop"><span class="msp-ico msp-ico-desktop"></span></button><button data-value="tablet" class="msp-responsive-btn msp-responsive-btn-tablet"><span class="msp-ico msp-ico-tablet"></span></button><button data-value="phone" class="msp-responsive-btn msp-responsive-btn-phone"><span class="msp-ico msp-ico-phone"></span></button>'),didInsertElement:function(){var that=this;this.$(".msp-responsive-btn").click(function(e){var bp="desktop";e.currentTarget.dataset&&e.currentTarget.dataset.value&&(bp=e.currentTarget.dataset.value),that.get("controller.parentController").send("changeActiveBreakpoint",bp)}),this.onBreakpointChange()},onBreakpointChange:function(){var bp=this.get("controller.parentController.activeBreakpoint");this.$(".msp-responsive-btn").removeClass("msp-btn-selected"),this.$(".msp-responsive-btn-"+bp).addClass("msp-btn-selected")}.observes("controller.parentController.activeBreakpoint")}),MSPanel.BreakpointSelect=Ember.View.extend({classNames:["msp-responsive-control"],layer:null,template:Ember.Handlebars.compile('<button data-value="desktop" class="msp-responsive-btn msp-responsive-btn-desktop"><span class="msp-ico msp-ico-desktop"></span></button><button data-value="tablet" class="msp-responsive-btn msp-responsive-btn-tablet"><span class="msp-ico msp-ico-tablet"></span></button><button data-value="phone" class="msp-responsive-btn msp-responsive-btn-phone"><span class="msp-ico msp-ico-phone"></span></button>'),didInsertElement:function(){var that=this,btns=this.$(".msp-responsive-btn");btns.click(function(e){var $this=that.$(e.currentTarget);$this.toggleClass("msp-btn-selected");var hideOn=[];that.$(".msp-btn-selected").each(function(index,btn){hideOn.push(that.$(btn).data("value"))}),that.set("layer.hideOn",hideOn.join(","))}),this.onBreakpointChange()},onBreakpointChange:function(){var hideOn=(this.get("layer.hideOn")||"").split(","),that=this;this.$(".msp-responsive-btn").removeClass("msp-btn-selected"),hideOn.forEach(function(hideBp){that.$(".msp-responsive-btn-"+hideBp).addClass("msp-btn-selected")})}.observes("layer","layer.hideOn")}),MSPanel.ResponsivePositionInput=Ember.View.extend({classNames:["msp-origin-control"],axis:null,layer:null,value:null,selectedNode:null,template:Ember.Handlebars.compile("{{number-input value=view.value min=null}}"),didInsertElement:function(){this.onValueChanged()},onValueChanged:function(){const bp=this.get("controller.parentController.activeBreakpoint"),layer=this.get("layer"),that=this,value=MSPanel.getResponsiveValue(layer,function(bp){return MSPanel.getResponsiveKey(bp,"offset"+that.get("axis").toUpperCase())},bp);this.set("value",value)}.observes("layer","layer.offsetX","layer.tabletOffsetX","layer.phoneOffsetX","layer.offsetY","layer.tabletOffsetY","layer.phoneOffsetY","controller.parentController.activeBreakpoint"),onChange:function(){const bp=this.get("controller.parentController.activeBreakpoint"),layer=this.get("layer");layer&&layer.set(MSPanel.getResponsiveKey(bp,"offset"+this.get("axis").toUpperCase()),this.get("value"))}.observes("value")}),MSPanel.ButtonsList=Ember.View.extend({classNames:["msp-buttons-container"],layer:null,template:Ember.Handlebars.compile('{{#each button in controller.buttonClasses}}<div class="msp-button-container" {{action "selectButton" button target=view}}><div class="msp-button-cell"><span {{bind-attr class=":ms-btn button.style button.size button.className"}}>Button</span></div></div>{{/each}}'),didInsertElement:function(){this.onValueChanged()},onValueChanged:function(){var className=this.get("layer.btnClass"),lastSelected=this.get("lastSelected");Ember.isEmpty(className)||(className=className.split(" ").pop(),Ember.isEmpty(lastSelected)||this.$("."+lastSelected).parent().removeClass("active"),this.$("."+className).parent().addClass("active"),this.set("lastSelected",className))}.observes("layer","layer.btnClass"),actions:{selectButton:function(button){this.set("layer.btnClass","ms-btn "+button.get("style")+" "+button.get("size")+" "+button.get("className"))}}}),MSPanel.ActionList=Ember.View.extend({classNames:["msp-action-list"],layer:null,showSlideNum:null,showDuration:null,template:Ember.Handlebars.compile('{{#dropdwon-List value=view.layer.action width=180}}<option value="next">'+(__MSP_LAN.ui_021||"Goto next slide")+'</option><option value="previous">'+(__MSP_LAN.ui_022||"Goto previous slide")+'</option><option value="gotoSlide">'+(__MSP_LAN.ui_025||"Goto slide")+'</option><option value="pause">'+(__MSP_LAN.ui_023||"Pause timer")+'</option><option value="resume">'+(__MSP_LAN.ui_024||"Resume timer")+'</option><option value="scrollToEnd">'+(__MSP_LAN.ui_028||"Scroll to bottom of slider")+'</option><option value="scrollTo">'+(__MSP_LAN.ui_030||"Scroll to an element in page")+'</option><option value="showLayer">'+(__MSP_LAN.ui_040||"Show layer")+'</option><option value="hideLayer">'+(__MSP_LAN.ui_041||"Hide layer")+'</option><option value="toggleLayer">'+(__MSP_LAN.ui_042||"Toggle layer")+'</option>{{/dropdwon-List}}{{#if view.showSlideNum}}<div class="msp-form-space-med"></div>'+(__MSP_LAN.ui_026||"Slide number : ")+' {{number-input value=view.layer.toSlide}}{{/if}}{{#if view.showDuration}}<div class="msp-form-space-med"></div>'+(__MSP_LAN.ui_029||"Scroll animation duration : ")+' {{number-input value=view.layer.scrollDuration}} s{{/if}}{{#if view.showTarget}}<div class="msp-form-space-med"></div>'+(__MSP_LAN.ui_029||"Scroll animation duration : ")+' {{number-input value=view.layer.scrollDuration}} s<div class="msp-form-space-med"></div>'+(__MSP_LAN.ui_031||"Target element : ")+' {{input value=view.layer.scrollTarget}}{{/if}}{{#if view.showTargetLayer}}<div class="msp-form-space-med"></div>'+(__MSP_LAN.ui_043||"Target layers id : ")+' {{input value=view.layer.actionTargetLayer}}<span style="margin-left:0.5em;">'+(__MSP_LAN.ui_045||'Add multiple layers ids separated by "|".')+"</span>{{/if}}"),onValueChanged:function(){var value=this.get("layer.action");this.set("showSlideNum","gotoSlide"===value),this.set("showDuration","scrollToEnd"===value),this.set("showTarget","scrollTo"===value),this.set("showTargetLayer","showLayer"===value||"hideLayer"===value||"toggleLayer"===value)}.observes("layer","layer.action").on("init")}),MSPanel.SimpleCodeBlock=Ember.View.extend({classNames:["msp-shortcode-box"],template:Ember.Handlebars.compile('<input type="text" readonly {{bind-attr value=view.value}}>'),width:150,didInsertElement:function(){this.$("input").on("click",function(){$(this).select()}).width(this.get("width"))}}),MSPanel.SettingsView=Ember.View.extend({didInsertElement:function(){this.set("controller.mainView",this)}}),MSPanel.SlidesView=Ember.View.extend({didInsertElement:function(){this.set("controller.mainView",this)}}),function(){"use strict";var ONE_SEC=80,TIMELINE_WIDTH=300;MSPanel.Timeline=Ember.View.extend({classNames:["msp-timeline-cont"],goLockAll:!0,goSoloAll:!0,goHideAll:!0,template:Ember.Handlebars.compile(' <div class="msp-tl-headbar"><div class="msp-tl-controls"><ul><li><a title="'+__MSP_LAN.tl_001+'" href="#" {{action "hideAll" target=view}}><span class="msp-ico msp-ico-blackhide"></span></a></li><li><a title="'+__MSP_LAN.tl_002+'" href="#" {{action "soloAll" target=view}}><span class="msp-ico msp-ico-blackiso"></span></a></li><li><a title="'+__MSP_LAN.tl_003+'" href="#" {{action "lockAll" target=view}}><span class="msp-ico msp-ico-blacklock"></span></a></li></ul><div class="msp-tl-current-time">{{view MSPanel.TimelineTime}}</div></div><div class="msp-tl-timeruler-cont">{{view MSPanel.TimelineRuler timeline=view}}</div></div><div class="msp-tl-layars-cont">{{view MSPanel.TimelineLayersList timeline=view}}{{view MSPanel.TimelineFrames timeline=view}}</div><div id="msp-resize-handle" class="msp-tl-resizehandle">...</div>'),didInsertElement:function(){var that=this;this.$("#msp-resize-handle").mousedown(function(event){var startH=that.get("controller.slide.timeline_h"),start_pos=event.pageY,down=!0;$(document).mousemove(function(event){if(down){var h=Math.max(100,startH+event.pageY-start_pos);that.set("controller.slide.timeline_h",h),that.$(".msp-tl-layars-cont").height(h),that.set("scrlY",0),event.preventDefault()}}).mouseup(function(){down=!1})}),this.onSlideChange()},willDestroyElement:function(){},onSlideChange:function(){this.$(".msp-tl-layars-cont").height(this.get("controller.slide.timeline_h"))}.observes("controller.slide"),actions:{lockAll:function(){var la=this.get("goLockAll");this.get("controller").forEach(function(layer){layer.set("isLocked",la)}),this.set("goLockAll",!la)},soloAll:function(){var sa=this.get("goSoloAll");this.get("controller").forEach(function(layer){layer.set("isSoloed",sa)}),this.set("goSoloAll",!sa)},hideAll:function(){var ha=this.get("goHideAll");this.get("controller").forEach(function(layer){layer.set("isHided",ha)}),this.set("goHideAll",!ha)}}}),MSPanel.TimelineTime=Ember.View.extend({tagName:"span",time:"00:00.00",template:Ember.Handlebars.compile("{{view.time}}"),update:function(){var currentTime=this.get("controller.timelinePos"),mins=Math.floor(currentTime/60),seconds=Math.abs(60*mins-Math.floor(currentTime)),ms=Math.floor(100*(currentTime-Math.floor(currentTime)));this.set("time",(10>mins?"0"+mins:mins)+":"+(10>seconds?"0"+seconds:seconds)+"."+(10>ms?"0"+ms:ms))}.observes("controller.timelinePos")}),MSPanel.PreviewSlideBtn=Ember.View.extend({classNames:["msp-preview-slide"],template:Ember.Handlebars.compile('{{#if controller.isPlaying}}<a href="#" {{action "pause"}} class="msp-preview-btn msp-pause-btn"><span class="msp-ico msp-ico-whitepause"></span></a>{{else}}<a href="#" {{action "enterPreviewMode"}} class="msp-preview-btn msp-play-btn"><span class="msp-ico msp-ico-whiteplay"></span></a>{{/if}}{{#if controller.isPreviewMode}}<a href="#" {{action "exitPreviewMode"}} class="msp-preview-btn-text msp-exit-preview">'+__MSP_LAN.tl_004+'</a>{{else}}<a href="#" {{action "enterPreviewMode"}} class="msp-preview-btn-text">'+__MSP_LAN.tl_005+"</a>{{/if}}")}),MSPanel.TimelineLayersList=Ember.View.extend({classNames:["msp-tl-layers-list"],template:Ember.Handlebars.compile('<ul>{{#each layer in controller}}<li class="msp-slidelayer-item" {{bind-attr data-id=layer.id}}> {{view MSPanel.LayerRow layer=layer}} </li>{{/each}}</ul><div class="msp-layer-botspace"></div>'),didInsertElement:function(){var self=this,$ele=this.$(),scrolling=function(event){var overflowOffset=self.$().offset(),scrollSensitivity=1,scrollSpeed=5,scrollParent=$ele,targetScroll=scrollParent[0].scrollTop;overflowOffset.top+scrollParent[0].offsetHeight-event.pageY<scrollSensitivity?targetScroll=scrollParent[0].scrollTop+scrollSpeed:event.pageY-overflowOffset.top<scrollSensitivity&&(targetScroll=scrollParent[0].scrollTop-scrollSpeed),self.set("timeline.scrlY",targetScroll)},soratableList=this.$(">ul").sortable({placeholder:"msp-layers-srtplaceholder",helper:"clone",axis:"y",zIndex:1002,opacity:.6,delay:100,start:function(e,ui){ui.item.show(),ui.helper.bind("mousemove",scrolling)},end:function(e,ui){ui.helper.unbind("mousemove",scrolling)},update:function(){var indexes={},layers=$(this).find(".msp-slidelayer-item"),len=layers.length,$this=$(this);layers.each(function(index){indexes[$(this).data("id")]=len-index}),$this.sortable("cancel"),self.get("controller").updateLayersSort(indexes)}}),wheelScroll=function(event){var st=$ele[0].scrollTop,delta=30*event.deltaY;0===st&&delta>0||0>delta&&st>=$ele[0].scrollHeight-$ele[0].clientHeight-10||(self.set("timeline.scrlY",st-delta),event.preventDefault())};$ele.mouseenter(function(){$ele.bind("mousewheel",wheelScroll)}).mouseleave(function(){$ele.unbind("mousewheel",wheelScroll)}),this.set("soratableList",soratableList)},onPlayingMode:function(){this.get("soratableList").sortable(this.get("controller.isPreviewMode")?"disable":"enable")}.observes("controller.isPreviewMode"),onScroll:function(){var scrl=this.get("timeline.scrlY");this.$()[0].scrollTop=parseInt(scrl)}.observes("timeline.scrlY"),willDestroyElement:function(){this.set("soratableList",null)}}),MSPanel.LayerRow=Ember.View.extend({classNames:["msp-layer-row"],classNameBindings:["selected:active"],selected:!1,isEditing:!1,template:Ember.Handlebars.compile('<ul><li><a href="#" title="'+__MSP_LAN.tl_006+'" {{action "toggleHide" target=view bubbles=false}}><span {{bind-attr class=view.hideClass}}></span></a></li><li><a href="#" title="'+__MSP_LAN.tl_007+'" {{action "toggleSolo" target=view bubbles=false}}><span {{bind-attr class=view.soloClass}}></span></a></li><li><a href="#" title="'+__MSP_LAN.tl_008+'" {{action "toggleLock" target=view bubbles=false}}><span {{bind-attr class=view.lockClass}}></span></a></li></ul><div class="msp-layer-label"><img {{bind-attr src=view.layerImg}}>{{#if view.isEditing}}{{view MSPanel.RenameLayer class="msp-lt-layer-rename" value=layer.name isEditingBinding="view.isEditing"}}{{else}}<span {{action "renameLayer" on="doubleClick" target=view}} class="msp-layer-labeltext">{{layer.name}}</span>{{/if}}</div><div class="msp-layer-controls"><a href="#" title="Duplicate" {{action "duplicateLayer" target=view bubbles=false}}><span class="msp-ico msp-ico-grayduplicate"></span></a><a href="#" title="Remove" {{action "removeLayer" target=view bubbles=false}}><span class="msp-ico msp-ico-grayremove"></span></a></div>'),mouseDown:function(){this.get("controller.isPreviewMode")||this.get("controller").send("selectLayer",this.get("layer"))},onInit:function(){this.set("layerImg",__MSP_PATH+"images/layertypes/"+this.get("layer.type")+".png"),this.updateLayerstate()}.on("init"),onSelect:function(){if(null===this.get("controller.currentLayer"))return void(this.get("selected")&&this.set("selected",!1));var layer=this.get("layer");this.set("selected",layer.get("id")===this.get("controller.currentLayer.id"))}.observes("controller.currentLayer").on("init"),updateLayerstate:function(){this.set("hideClass","msp-ico "+(this.get("layer.isHided")?"msp-ico-blackhide":"msp-ico-graypoint")),this.set("soloClass","msp-ico "+(this.get("layer.isSoloed")?"msp-ico-blackiso":"msp-ico-graypoint")),this.set("lockClass","msp-ico "+(this.get("layer.isLocked")?"msp-ico-blacklock":"msp-ico-graypoint"))}.observes("layer.isHided","layer.isLocked","layer.isSoloed"),actions:{duplicateLayer:function(){this.get("controller.isPreviewMode")||this.get("controller").duplicateLayer(this.get("layer"))},removeLayer:function(){this.get("controller.isPreviewMode")||confirm(__MSP_LAN.tl_009)&&this.get("controller").removeLayer(this.get("layer"))},renameLayer:function(){this.set("isEditing",!0)},toggleLock:function(){this.set("layer.isLocked",!this.get("layer.isLocked"))},toggleSolo:function(){this.set("layer.isSoloed",!this.get("layer.isSoloed"))},toggleHide:function(){this.set("layer.isHided",!this.get("layer.isHided"))}}}),MSPanel.RenameLayer=Ember.TextField.extend({didInsertElement:function(){this.$().focus()},focusOut:function(){this.set("isEditing",!1),Ember.isEmpty(this.get("value"))&&this.set("value","layer")},insertNewline:function(){this.set("isEditing",!1),Ember.isEmpty(this.get("value"))&&this.set("value","layer")}}),MSPanel.TimelineRuler=Ember.View.extend({classNames:["msp-tl-ruler"],attributeBindings:["style"],template:Ember.Handlebars.compile('<div id="ruler-frame-indicator" class="msp-tl-ruler-frameindicator"></div><div id="ruler-delay-indicator" class="msp-tl-delayindicator"></div>{{#each time in view.timeList}}<span class="mps-tl-lable">{{time}}</span>{{/each}}'),setup:function(){for(var width,time=TIMELINE_WIDTH+1,timeList=[],i=0;i!==time;i++)timeList.push(i+"s");width=time*ONE_SEC,this.set("timeline.rulerWidth",width),this.set("style","width:"+width+"px"),this.set("timeList",timeList)}.on("init"),didInsertElement:function(){var that=this,fi=this.$("#ruler-frame-indicator").slider({slide:function(event,ui){var timeline=that.get("controller.tweenTimeline");that.get("controller").send("pause"),timeline.position(Math.min(.998,ui.value/(300*ONE_SEC))*timeline.duration)},max:300*ONE_SEC});this.get("controller.isPreviewMode")||fi.css("display","none")},onPlaying:function(){var isPreviewMode=this.get("controller.isPreviewMode"),fi=this.$("#ruler-frame-indicator");isPreviewMode?fi.css("width",this.get("controller.tweenTimeline").duration*ONE_SEC).css("display",""):fi.css("display","none").slider("option","value",0)}.observes("controller.isPreviewMode"),updateFrameIndicator:function(){this.$("#ruler-frame-indicator").slider("option","value",300*this.get("controller.timelinePos")*ONE_SEC/this.get("controller.tweenTimeline").duration),this.onScroll()}.observes("controller.timelinePos"),onScroll:function(){var scrl=this.get("timeline.scrlX");this.$().parent()[0].scrollLeft=parseInt(scrl)}.observes("timeline.scrlX"),updateDelayIndicator:function(){this.$("#ruler-delay-indicator")[0].style.left=this.get("controller.slide.duration")*ONE_SEC+20+"px"}.observes("controller.slide.duration").on("didInsertElement")}),MSPanel.TimelineFrames=Ember.View.extend({classNames:["msp-tl-frames-cont"],template:Ember.Handlebars.compile('<ul>{{#each layer in controller}}<li> {{view MSPanel.FramesRow layer=layer}} </li>{{/each}}</ul><div id="delay-indicator" class="msp-tl-delayindicator"></div><div id="frame-indicator" class="msp-tl-frameindicator"></div>'),didInsertElement:function(){this.$().jScrollPane({hideFocus:!0,forceReinit:!0}),$(window).resize(function(){api.reinitialise()});var api=this.$().data("jsp"),that=this;this.$().bind("jsp-scroll-y",function(event,scrollPositionY){that.set("timeline.scrlY",scrollPositionY)}).bind("jsp-scroll-x",function(event,scrollPositionX){that.set("timeline.scrlX",scrollPositionX)})},updatejsp:function(){Ember.run.scheduleOnce("afterRender",this,this.applyScroll)}.observes("controller","controller.@each","timeline.rulerWidth","controller.slide.timeline_h"),applyScroll:function(){var api=this.$().data("jsp");api.reinitialise()},scrollTo:function(){this.$().data("jsp").scrollToY(this.get("timeline.scrlY"))}.observes("timeline.scrlY"),updateDelayIndicator:function(){this.$("#delay-indicator")[0].style.left=this.get("controller.slide.duration")*ONE_SEC+20+"px"}.observes("controller.slide.duration").on("didInsertElement"),updateFrameIndicator:function(){this.$("#frame-indicator")[0].style.left=this.get("controller.timelinePos")*ONE_SEC+20+"px"}.observes("controller.timelinePos"),onPlaying:function(){this.get("controller.isPreviewMode")?this.$("#frame-indicator").css("display",""):this.$("#frame-indicator").css("display","none")}.observes("controller.isPreviewMode").on("didInsertElement")}),MSPanel.FramesRow=Ember.View.extend({classNames:["msp-frames-row"],attributeBindings:["style"],classNameBindings:["selected:active"],selected:!1,rangeSlider:null,didInsertElement:function(){var rangeSlider=new averta.rangeSlider,parentView=this.get("parentView"),that=this;this.$().append(rangeSlider.$element.addClass("msp-timeline-range"));var updateTTposition=function(tt){tt.offset().left<parentView.$().offset().left+10&&tt.css("left",parentView.$().offset().left+10)},showDelay=rangeSlider.addRange("startDelay",this.get("layer.showDelay")*ONE_SEC,"msp-range msp-range-delay",function(range){return that.set("layer.showDelay",range.value/ONE_SEC),updateTTposition(range.tt),__MSP_LAN.tl_010+" "+Math.round(range.value/ONE_SEC*100)/100+"s"}),showDuration=rangeSlider.addRange("showDuration",this.get("layer.showDuration")*ONE_SEC,"msp-range msp-range-show",function(range){return that.set("layer.showDuration",range.value/ONE_SEC),updateTTposition(range.tt),__MSP_LAN.tl_011+" "+Math.round(range.value/ONE_SEC*100)/100+"s"}),hideDelay=rangeSlider.addRange("hideDelay",this.get("layer.hideDelay")*ONE_SEC,"msp-range msp-range-wating",function(range){return that.set("layer.hideDelay",range.value/ONE_SEC),updateTTposition(range.tt),__MSP_LAN.tl_012+" "+Math.round(range.value/ONE_SEC*100)/100+"s"}),hideDuration=rangeSlider.addRange("hideDuration",this.get("layer.hideDuration")*ONE_SEC,"msp-range msp-range-hide",function(range){return that.set("layer.hideDuration",range.value/ONE_SEC),updateTTposition(range.tt),__MSP_LAN.tl_013+" "+Math.round(range.value/ONE_SEC*100)/100+"s"});this.set("hideDurationRange",hideDuration),this.set("hideDelayRange",hideDelay),this.set("showDurationRange",showDuration),this.set("showDelayRange",showDelay),this.set("rangeSlider",rangeSlider),this.onHideStateChange(),this.onLayerPositionTypeChange()},onLayerPositionTypeChange:function(){var pos=this.get("layer.position");"static"===pos?(this.$(".msp-timeline-range").css("display","none"),this.$().append('<p class="msp-static-notice">'+(__MSP_LAN.tl_014||"Static layer doesn't support transitions.")+"</p>")):(this.$(".msp-timeline-range").css("display",""),this.$(".msp-static-notice").remove())}.observes("layer.position"),onValuesChanged:function(){var rangeSlider=this.get("rangeSlider");rangeSlider.setValue(this.get("showDelayRange"),this.get("layer.showDelay")*ONE_SEC),rangeSlider.setValue(this.get("showDurationRange"),this.get("layer.showDuration")*ONE_SEC),this.get("layer.useHide")&&(rangeSlider.setValue(this.get("hideDelayRange"),this.get("layer.hideDelay")*ONE_SEC),rangeSlider.setValue(this.get("hideDurationRange"),this.get("layer.hideDuration")*ONE_SEC))}.observes("layer.showDelay","layer.showDuration","layer.hideDelay","layer.hideDuration"),onHideStateChange:function(){var useHide=this.get("layer.useHide"),hideDuration=this.get("hideDurationRange"),hideDelay=this.get("hideDelayRange"),rangeSlider=this.get("rangeSlider");useHide?(rangeSlider.showRange(hideDelay),rangeSlider.showRange(hideDuration)):(rangeSlider.hideRange(hideDelay),rangeSlider.hideRange(hideDuration))}.observes("layer.useHide"),onPlayingMode:function(){var isPreviewMode=this.get("controller.isPreviewMode"),rangeSlider=this.get("rangeSlider");isPreviewMode?rangeSlider.disable():rangeSlider.enable()}.observes("controller.isPreviewMode"),onSelect:function(){if(null===this.get("controller.currentLayer"))return void(this.get("selected")&&this.set("selected",!1));var layer=this.get("layer");this.set("selected",layer.get("id")===this.get("controller.currentLayer.id"))}.observes("controller.currentLayer").on("init"),willDestroyElement:function(){this.get("rangeSlider").remove()},update:function(){var width=this.get("parentView.timeline.rulerWidth");this.set("style","width:"+width+"px")}.observes("parentView.timeline.rulerWidth").on("init")})}(),MSPanel.StageArea=Ember.View.extend({classNames:["msp-stage-area"],selectedLayer:null,zoom:100,template:Ember.Handlebars.compile('<div class="msp-metabox-row"><div class="msp-stage-top-toolbar"><label>'+(__MSP_LAN.sv_004||"Responsive : ")+' </label> {{view MSPanel.ResponsiveSwitch}}<span class="msp-form-space"></span><label>'+__MSP_LAN.sv_001+' </label> {{view MSPanel.AlignBtns target=view}}<span class="msp-form-space"></span><label>'+__MSP_LAN.sv_002+' </label> {{switch-box value=sliderSettings.snapping}}<span class="msp-form-space"></span><label>'+(__MSP_LAN.sv_010||"Layer position origin : ")+' </label> {{view MSPanel.PositionOrigin layer=view.layer}}<span class="msp-form-space"></span><label>'+__MSP_LAN.sv_003+' </label> {{number-input value=view.zoom}} %</div></div><hr class="msp-metabox-hr" style="margin-top:10px;"><div class="msp-stage-container">{{view MSPanel.Stage}}</div>{{#if noticeMsg}}<div class="msp-stage-msg"><span class="msp-ico msp-ico-notice"></span>{{{noticeMsg}}}</div>{{/if}}'),onSelectedLayerChanged:function(){this.set("layer",this.get("selectedLayer.layer"))}.observes("selectedLayer"),actions:{alignLayer:function(align){this.get("selectedLayer")&&this.get("selectedLayer").align(align)}}}),MSPanel.Stage=Ember.View.extend({classNames:["msp-slide-stage"],attributeBindings:["style"],selectedLayer:null,overSoloPlane:0,template:Ember.Handlebars.compile('<div id="stage-bg" class="msp-stage-bg"></div><div id="overlaybox" {{bind-attr class=":msp-stage-pattern :ms-pattern controller.slide.pattern"}}></div><div id="snapbox" class="msp-stage-snapbox"></div><div id="solo-plane" class="msp-solo-plane"></div>{{#each layer in controller }}{{view MSPanel.StageLayer layer=layer}}{{/each}}'),resize:function(){const bp=this.get("controller.parentController.activeBreakpoint"),settings=this.get("controller.sliderSettings");var w=MSPanel.getResponsiveValue(settings,function(){return MSPanel.getResponsiveKey(bp,"width")},bp),h=this.get("controller.sliderSettings.height");this.get("controller.sliderSettings.responsiveSize")&&(h=MSPanel.getResponsiveValue(settings,function(){return MSPanel.getResponsiveKey(bp,"height")},bp)),this.set("width",w),this.set("height",h),$.browser.mozilla?this.$().css({width:w,height:h,"-moz-transform":"scaleX("+this.get("parentView.zoom")/100+") scaleY("+this.get("parentView.zoom")/100+")","-moz-transform-origin":"0 0"}).parent().height(h*this.get("parentView.zoom")/100+75):this.$().css({width:w,height:h,zoom:this.get("parentView.zoom")+"%"});var alinger=this.get("bgAligner");alinger&&alinger.align()}.observes("controller.sliderSettings.responsiveSize","controller.sliderSettings.width","controller.sliderSettings.height","parentView.zoom","controller.parentController.activeBreakpoint").on("didInsertElement"),didInsertElement:function(){var BG=this.$("#stage-bg"),BGImage=$("<img/>");BGImage.css("visibelity","hidden").each($.jqLoadFix);var aligner=new MSAligner(this.get("controller.slide.fillMode"),BG,BGImage);this.set("bgAligner",aligner),this.set("bgImg",BGImage),$(document).on("keydown",{that:this},this.moveLayer),this.set("soloPlane",this.$("#solo-plane").css("display","none")),this.onBGChange()},onBGColorChange:function(){var color=this.get("controller.slide.bgColor");Ember.isEmpty(color)?this.$("#stage-bg").css("background-color",""):this.$("#stage-bg").css("background-color",color)}.observes("controller.slide.bgColor").on("didInsertElement"),onColorOverlayChange:function(){var color=this.get("controller.slide.colorOverlay");Ember.isEmpty(color)?this.$("#overlaybox").css("background-color",""):this.$("#overlaybox").css("background-color",color)}.observes("controller.slide.colorOverlay").on("didInsertElement"),onBGChange:function(){var alinger=this.get("bgAligner");alinger&&alinger.reset();var bg=this.get("controller.slide.bg"),bgImg=this.get("bgImg");if(Ember.isEmpty(bg))bgImg.detach();else{var that=this;bgImg.appendTo(this.$("#stage-bg")),bgImg.preloadImg(bg,function(event){that._onBGLoad(event)}),bgImg.attr("src",bg)}}.observes("controller.slide.bg"),_onBGLoad:function(event){var aligner=this.get("bgAligner");aligner&&(aligner.init(event.width,event.height),aligner.align(),this.get("bgImg").css("visibelity",""))},mouseDown:function(){this.get("controller").send("clearSelect"),this.set("selectedLayer",null)},onFillModeChanged:function(){var aligner=this.get("bgAligner");aligner.changeType(this.get("controller.slide.fillMode"))
}.observes("controller.slide.fillMode"),moveLayer:function(event){var focused_ele=$(document.activeElement);if(0===focused_ele.length||!focused_ele.is("input")&&!focused_ele.is("textarea")){var that=event.data.that,selectedLayer=that.get("selectedLayer");keyCode=event.which,selectedLayer&&keyCode>=37&&keyCode<=40&&(selectedLayer.move(keyCode,event.shiftKey),event.preventDefault())}},onSelectedLayerChanged:function(){this.set("parentView.selectedLayer",this.get("selectedLayer"))}.observes("selectedLayer"),showSoloPlane:function(){var that=this;setTimeout(function(){that.get("soloPlane").css("display","")},1),this.incrementProperty("overSoloPlane")},hideSoloPlane:function(){var overSoloPlane=this.get("overSoloPlane");overSoloPlane=Math.max(0,overSoloPlane-1),this.set("overSoloPlane",overSoloPlane),0===overSoloPlane&&this.get("soloPlane").css("display","none")},previewMode:function(){var isPreviewMode=this.get("controller.isPreviewMode");isPreviewMode&&this.get("overSoloPlane")>0?this.get("soloPlane").css("display","none"):!isPreviewMode&&this.get("overSoloPlane")>0&&this.get("soloPlane").css("display","")}.observes("controller.isPreviewMode"),willDestroyElement:function(){$(document).off("keydown",this.moveLayer),this.set("bgAligner",null)}}),MSPanel.TextLayerTemplate='{{#if view.layer.masked }}<div class="msp-layer-mask" {{bind-attr style=view.maskSizes}}><div class="msp-layer" {{bind-attr style=view.layerStyle}}>{{{view.layer.content}}}</div></div>{{else}}<div class="msp-layer" {{bind-attr style=view.layerStyle}}>{{{view.layer.content}}}</div>{{/if}}',MSPanel.ButtonLayerTemplate='<div {{bind-attr style=view.layerStyle class=":ms-btn layer.btnClass"}}>{{{view.layer.content}}}</div>',MSPanel.dynamicTags&&(MSPanel.TextLayerTemplate='<div class="msp-layer" {{bind-attr style=view.layerStyle}}>{{#if view.layer.dynamicContent}}{{{view.layer.dynamicContent}}}{{else}}{{{view.layer.content}}}{{/if}}</div>'),MSPanel.ImageLayerTemplate='{{#if view.layer.masked }}<div  class="msp-layer-mask" {{bind-attr style=view.maskSizes}}>{{#if view.hasImg}}<img class="msp-layer" {{bind-attr src=view.layer.img style=view.layerStyle}}>{{else}}<img src="'+__MSP_PATH+'images/image-layer.png">{{/if}}</div>{{else}}{{#if view.hasImg}}<img class="msp-layer" {{bind-attr src=view.layer.img style=view.layerStyle}}>{{else}}<img src="'+__MSP_PATH+'images/image-layer.png">{{/if}}{{/if}}',MSPanel.VideoLayerTemplate='<div {{bind-attr style=view.layerStyle}} class="msp-stage-videolayer msp-layer">{{#if view.layer.hasCover}}<img {{bind-attr src=view.layer.coverImg}}>{{/if}}<img class="msp-stage-videoicon" src="'+__MSP_PATH+'images/video-layer.png"></div>',MSPanel.HotspotLayerTemplate='<div class="msp-stage-hotspot msp-layer"></div>',MSPanel.StageLayer=Ember.View.extend({classNames:["msp-stage-layer"],classNameBindings:["selected:active"],attributeBindings:["style"],hasImg:!1,lastStyle:{},onInit:function(){switch(this.get("layer.type")){case"text":this.set("template",Ember.Handlebars.compile(MSPanel.TextLayerTemplate));break;case"image":this.set("template",Ember.Handlebars.compile(MSPanel.ImageLayerTemplate));break;case"video":this.set("template",Ember.Handlebars.compile(MSPanel.VideoLayerTemplate)),Ember.isEmpty(this.get("layer.width"))&&this.set("layer.width",300),Ember.isEmpty(this.get("layer.height"))&&this.set("layer.height",150);break;case"hotspot":this.set("template",Ember.Handlebars.compile(MSPanel.HotspotLayerTemplate));break;case"button":this.set("template",Ember.Handlebars.compile(MSPanel.ButtonLayerTemplate))}this.set("layer.stageLayer",this)}.on("init"),checkImageLayerPath:function(){var hasImg=!Ember.isEmpty(this.get("layer.img"));this.set("hasImg",hasImg),Ember.run.scheduleOnce("afterRender",this,this.afterRenderEvent)}.observes("layer.img").on("didInsertElement"),didInsertElement:function(){var that=this;this.$().draggable({snap:this.get("controller.sliderSettings.snapping")?".msp-stage-layer, .msp-stage-snapbox":!1,snapTolerance:8,delay:200,drag:function(event,ui){that.updateLayerPostion(ui.position.left,ui.position.top)}}),"text"===this.get("layer.type")&&this.$().click(function(e){e.preventDefault(),e.stopPropagation()}),this.onPlayingMode(),this.onSoloed(),this.updateLayerStyle(this.get("layer.styleModel").toJSON());var custom=this.get("layer.styleModel.custom");Ember.isEmpty(custom)||this.$().attr("style",this.$().attr("style")+";"+custom)},afterRenderEvent:function(){if("image"!==this.get("layer.type")||Ember.isEmpty(this.get("layer.img")))this.repositionLayer();else{var that=this;this.$("img").one("load",function(){that.repositionLayer()}).each($.jqLoadFix)}},updateZIndex:function(){this.get("layer.isSoloed")?this.$().css("z-index",this.get("layer.order")+501):this.$().css("z-index",this.get("layer.order"))}.observes("layer.order").on("didInsertElement"),showAndHide:function(){this.get("layer.isHided")?this.$().css("display","none"):this.$().css("display","")}.observes("layer.isHided").on("didInsertElement"),onPlayingMode:function(){this.$().draggable(this.get("controller.isPreviewMode")||this.get("layer.isLocked")?"disable":"enable")}.observes("controller.isPreviewMode","layer.isLocked"),onSoloed:function(){this.get("layer.isSoloed")?this.get("parentView").showSoloPlane():this.get("parentView").hideSoloPlane(),this.updateZIndex()}.observes("layer.isSoloed").on("didInsertElement"),updateLayerPostion:function(x,y){this.beginPropertyChanges();var bp=this.get("controller.parentController").activeBreakpoint,offsetX="desktop"===bp?"layer.offsetX":"layer."+bp+"OffsetX",offsetY="desktop"===bp?"layer.offsetY":"layer."+bp+"OffsetY";x=x||this.$().position().left,y=y||this.$().position().top;var origin=MSPanel.getResponsiveValue(this.get("layer"),MSPanel.getLayerResponsiveOriginKey,bp),w=this.get("hasImg")?Math.max(this.$().outerWidth(),this.$("img").width()):this.$().outerWidth(),h=this.get("hasImg")?Math.max(this.$().outerHeight(),this.$("img").height()):this.$().outerHeight();switch(origin.charAt(0)){case"t":this.set(offsetY,y);break;case"m":this.set(offsetY,y-(this.get("parentView.height")-h)/2);break;case"b":this.set(offsetY,this.get("parentView.height")-h-y)}switch(origin.charAt(1)){case"l":this.set(offsetX,x);break;case"c":this.set(offsetX,x-(this.get("parentView.width")-w)/2);break;case"r":this.set(offsetX,this.get("parentView.width")-w-x)}this.set("intranlChange",!0),this.endPropertyChanges()},repositionLayer:function(){if(this.get("intranlChange"))return void this.set("intranlChange",!1);var layer=this.get("layer"),bp=this.get("controller.parentController").activeBreakpoint,offset=MSPanel.getResponsiveOffset(bp,layer),origin=MSPanel.getResponsiveValue(layer,MSPanel.getLayerResponsiveOriginKey,bp),x=offset.x,y=offset.y,w=this.get("hasImg")?Math.max(this.$().outerWidth(),this.$("img").width()):this.$().outerWidth(),h=this.get("hasImg")?Math.max(this.$().outerHeight(),this.$("img").height()):this.$().outerHeight();switch(origin.charAt(0)){case"t":this.$().css("top",y);break;case"m":this.$().css("top",y+(this.get("parentView.height")-h)/2);break;case"b":this.$().css("top",this.get("parentView.height")-h-y)}switch(origin.charAt(1)){case"l":this.$().css("left",x);break;case"c":this.$().css("left",x+(this.get("parentView.width")-w)/2);break;case"r":this.$().css("left",this.get("parentView.width")-w-x)}}.observes("layer.offsetX","layer.offsetY","layer.origin","layer.tabletOffsetX","layer.tabletOffsetY","layer.tabletOrigin","layer.phoneOffsetX","layer.phoneOffsetY","layer.phoneOrigin"),onBpChange:function(){this.set("intranlChange",!1),this.repositionLayer()}.observes("controller.parentController.activeBreakpoint"),onOriginChange:function(){this.updateLayerPostion()}.observes("layer.origin","layer.phoneOrigin","layer.tabletOrigin"),onResize:function(){var style="";null!=this.get("layer.width")&&(style+="width:"+this.get("layer.width")+"px;"),null!=this.get("layer.height")&&(style+="height:"+this.get("layer.height")+"px;"),this.set("layerStyle",style)}.observes("layer.width","layer.height").on("didInsertElement"),onMaskResize:function(){var style="";this.get("layer.masked")&&this.get("layer.maskCustomSize")&&(null!=this.get("layer.maskWidth")&&(style+="width:"+this.get("layer.maskWidth")+"px;"),null!=this.get("layer.maskHeight")&&(style+="height:"+this.get("layer.maskHeight")+"px;")),this.set("maskSizes",style)}.observes("layer.maskWidth","layer.maskHeight","layer.masked","layer.maskCustomSize").on("didInsertElement"),snappingStateChange:function(){this.$().draggable("option","snap",this.get("controller.sliderSettings.snapping")?".msp-stage-layer, .msp-stage-snapbox":!1)}.observes("controller.sliderSettings.snapping"),onSelectedLayerChanged:function(){if(null===this.get("controller.currentLayer")||this.get("layer.isLocked"))return this.get("selected")&&this.set("selected",!1),void this.set("parentView.selectedLayer",null);var isSelected=this.get("layer.id")===this.get("controller.currentLayer.id");this.set("selected",isSelected),isSelected&&this.set("parentView.selectedLayer",this)}.observes("controller.currentLayer","layer.isLocked"),mouseDown:function(){return this.get("controller.isPreviewMode")||this.get("layer.isLocked")?void 0:(this.get("controller").send("selectLayer",this.get("layer")),!1)},move:function(keyCode,shift){if(!this.get("layer.isHided")&&!this.get("layer.isLocked")){var moveUnit=shift?10:1;switch(keyCode){case 37:this.$().css("left","-="+moveUnit);break;case 38:this.$().css("top","-="+moveUnit);break;case 39:this.$().css("left","+="+moveUnit);break;case 40:this.$().css("top","+="+moveUnit)}this.updateLayerPostion()}},align:function(align){if(!this.get("layer.isHided")&&!this.get("layer.isLocked")){switch(align){case"top":this.$().css("top",0);break;case"mid":this.$().css("top",(this.get("parentView.height")-this.$().outerHeight())/2);break;case"bot":this.$().css("top",this.get("parentView.height")-this.$().outerHeight());break;case"left":this.$().css("left",0);break;case"center":this.$().css("left",(this.get("parentView.width")-this.$().outerWidth())/2);break;case"right":this.$().css("left",this.get("parentView.width")-this.$().outerWidth())}this.updateLayerPostion()}},reset:function(tweeenTimeline){tweeenTimeline.removeTween(this.get("showTween")),this.set("showTween",null),this.get("layer.useHide")&&(tweeenTimeline.removeTween(this.get("hideTween")),this.set("hideTween",null)),this.$().css(window._jcsspfx+"Transform","").css("opacity",1),this.get("layer.masked")&&this.$().find(".msp-layer").css(window._jcsspfx+"Transform","").css("opacity",1)},registerTween:function(timeline){if("static"!==this.get("layer.position")){var show_eff=this.get("layer.showTransform"),show_delay=Number(this.get("layer.showDelay")),show_duration=Number(this.get("layer.showDuration")),show_origin=this.get("layer.showOrigin"),$this=this.$(),$tweenTarget=this.get("layer.masked")?$this.find(".msp-layer"):$this;$tweenTarget.css(window._jcsspfx+"Transform",show_eff),this.get("layer.showFade")&&$tweenTarget.css("opacity",0);var to_transform=JTween.resetTransform(show_eff),showTween=new JTween($tweenTarget[0],show_duration,{transform:to_transform,opacity:1},{ease:window.convertEaseName(this.get("layer.showEase"))});if(timeline.addTween(show_delay,showTween),timeline.addCallback(show_delay,this.updateOrigin,[$tweenTarget[0],show_origin],this.updateOrigin,[$tweenTarget[0],show_origin]),this.set("showTween",showTween),this.get("layer.useHide")){var hide_delay=Number(this.get("layer.hideDelay")),hide_duration=Number(this.get("layer.hideDuration")),hide_origin=this.get("layer.hideOrigin"),hideTween=new JTween($tweenTarget[0],hide_duration,{transform:this.get("layer.hideTransform"),opacity:this.get("layer.hideFade")?0:1},{ease:window.convertEaseName(this.get("layer.hideEase"))});timeline.addTween(show_delay+show_duration+hide_delay,hideTween),timeline.addCallback(show_delay+show_duration+hide_delay,this.updateOrigin,[$tweenTarget[0],hide_origin],this.updateOrigin,[$tweenTarget[0],show_origin]),this.set("hideTween",hideTween)}}},updateOrigin:function(layer,origin){layer.style[window._jcsspfx+"TransformOrigin"]=origin},updateLayerStyle:function(style){for(var key in style)null==style[key]&&delete style[key];if(!Ember.isEmpty(this.get("lastStyle"))){var oldStyle=this.get("lastStyle");for(key in oldStyle)this.$().css(key,"")}this.set("lastStyle",jQuery.extend({},style)),"button"===this.get("layer.type")?this.$(".ms-btn").css(style):this.$().css(style)},willDestroyElement:function(){this.get("layer.isSoloed")&&this.get("parentView").hideSoloPlane()}}),MSPanel.StyleEditor=Ember.View.extend({classNames:["mps-style-editor"],layer:null,template:Ember.Handlebars.compile('<div class="left-box">{{view MSPanel.StylePreview layer=view.layer}}<div class="msp-section-content">{{partial "style-properties"}}</div><div class="msp-applystyle-cont"><button {{action "applyStyle"}} class="msp-blue-btn msp-applystyle">'+__MSP_LAN.se_001+'</button><button {{action "saveAsPreset"}} class="msp-gray-btn msp-savepreset">'+__MSP_LAN.se_002+"</button></div></div>{{view MSPanel.StyleList}}"),didInsertElement:function(){var that=this;this.$().dialog({resizable:!1,modal:!0,width:1e3,height:550,title:__MSP_LAN.se_006||"Style Editor",draggable:!1,show:"fade",dialogClass:"msp-dialog",appendTo:this.get("parentView").$(),dialogClass:"msp-container msp-dialog",close:function(){that.get("controller.parent").closeStyleEditor(),that.get("controller").send("cancel")}}),$(window).bind("resize",{ref:this},this.onWindowResize)},onWindowResize:function(event){var that=event.data.ref;that.$().dialog("option","position","center")},willDestroyElement:function(){$(window).unbind("resize",this.onWindowResize),this.$().dialog("destroy")}});var STAGE_WIDTH=780,STAGE_HEIGHT=200;MSPanel.StylePreview=Ember.View.extend({classNames:["msp-section","msp-style-preview"],template:Ember.Handlebars.compile('<div class="msp-style-preview-cont"><div class="msp-style-sample" id="sample">Sample Text</div><div id="bgToggle" class="bgToggle"></div></div>'),didInsertElement:function(){var sample=this.$("#sample");this.set("sample",sample),this.update();var that=this;this.$("#bgToggle").click(function(){var $this=$(this);$this.data("isBlack")?(that.$().css("background-color","white"),$this.css("background-color","#222"),$this.data("isBlack",!1)):($this.data("isBlack",!0),that.$().css("background-color","#222"),$this.css("background-color","white"))}).css("background-color","#222")},alignCenter:function(){var sample=this.get("sample");sample.css("left",(STAGE_WIDTH-sample.outerWidth())/2).css("top",(STAGE_HEIGHT-sample.outerHeight())/2)},update:function(){this.get("sample").attr("style",this.get("controller.draftStyleText")),this.alignCenter()}.observes("controller.draftStyleText")}),MSPanel.StyleList=Ember.View.extend({classNames:["msp-section msp-style-list"],template:Ember.Handlebars.compile('<div class="msp-section-handle"><span class="msp-section-title">'+__MSP_LAN.se_003+'</span></div><div class="msp-section-content"><div class="msp-style-list-cont">{{#each style in presetStyles}}{{view MSPanel.StyleRow style=style}}{{/each}}</div></div>')}),MSPanel.StyleRow=Ember.View.extend({classNames:["msp-style-row"],classNameBindings:["selected:active"],style:null,selected:!1,template:Ember.Handlebars.compile('<span class="msp-style-name">{{style.name}}</span><a {{action "removeStyle" style target=view bubbles=false}} class="msp-style-remove"><span class="msp-ico msp-ico-grayremove"></span></a>'),click:function(){this.set("controller.currentStyle",this.get("style")),this.get("controller").updateDraft(this.get("style"))},onSelectChanged:function(){this.get("style")===this.get("controller.currentStyle")?this.set("selected",!0):this.set("selected",!1)}.observes("controller.currentStyle").on("init"),actions:{removeStyle:function(style){confirm(__MSP_LAN.se_004.jfmt(style.get("name")))&&this.get("controller").send("removeStyle",style)}}}),MSPanel.EffectEditor=Ember.View.extend({classNames:["mps-effect-editor"],layer:null,template:Ember.Handlebars.compile('<div class="left-box">{{view MSPanel.EffectPreview layer=view.layer}}<div class="msp-section-content">{{partial "effect-properties"}}</div><div class="msp-applyeffect-cont"><button {{action "applyEffect"}} class="msp-blue-btn msp-applyeffect">'+__MSP_LAN.ee_002+'</button><button {{action "saveAsPreset"}} class="msp-gray-btn msp-savepreset">'+__MSP_LAN.ee_003+"</button></div></div>{{view MSPanel.EffectList}}"),didInsertElement:function(){var that=this;this.$().dialog({resizable:!1,modal:!0,width:1e3,height:550,title:__MSP_LAN.ee_006||"Transition Editor",draggable:!1,show:"fade",dialogClass:"msp-dialog",appendTo:this.get("parentView").$(),dialogClass:"msp-container msp-dialog",close:function(){that.get("controller.parent").closeEffectEditor(),that.get("controller").send("cancel")}}),$(window).bind("resize",{ref:this},this.onWindowResize)},onWindowResize:function(event){var that=event.data.ref;that.$().dialog("option","position","center")},willDestroyElement:function(){$(window).unbind("resize",this.onWindowResize),this.$().dialog("destroy")}});var EFF_STAGE_WIDTH=780,EFF_STAGE_HEIGHT=265;MSPanel.EffectPreview=Ember.View.extend({classNames:["msp-section","msp-effect-preview"],isPlaying:!1,isPlayingMode:!1,template:Ember.Handlebars.compile('<div class="msp-effect-preview-cont"><div class="msp-effect-sample" id="sample"></div><div class="msp-effect-guide" id="guide"></div><div class="msp-preview-controls">{{#if view.isPlaying}}<a {{action "pause" target=view}} class="msp-effect-review-btn msp-preview-btn msp-pause-btn"><span class="msp-ico msp-ico-whitepause"></span></a>{{else}}<a {{action "play" target=view}} class="msp-effect-review-btn msp-preview-btn msp-play-btn"><span class="msp-ico msp-ico-whiteplay"></span></a>{{/if}}<div class="msp-effect-timeline-slider msp-ui-slider" id="timeline-slider"></div></div></div>'),didInsertElement:function(){var sample=this.$("#sample"),guide=this.$("#guide"),timelineSlider=this.$("#timeline-slider").slider();this.set("sample",sample),this.set("guide",guide),this.set("timelineSlider",timelineSlider);var that=this;timelineSlider.on("slide",function(event,ui){var timeline=that.get("timeline");that.send("pause"),timeline.position(Math.min(.998,ui.value/100)*timeline.duration)}).css("display","none"),this.alignCenter(),this.update(),this.set("controller.preview",this)},willDestroyElement:function(){this.set("controller.preview",null),this.send("pause"),this.send("exitPlaying"),this.get("timelineSlider").remove()},alignCenter:function(){var sample=this.get("sample"),guilde=this.get("guide");sample.css("left",(EFF_STAGE_WIDTH-sample.outerWidth())/2).css("top",(EFF_STAGE_HEIGHT-sample.outerHeight())/2),guilde.css("left",(EFF_STAGE_WIDTH-guilde.outerWidth())/2).css("top",(EFF_STAGE_HEIGHT-guilde.outerHeight())/2)},update:function(){this.get("isPlayingMode")&&this.send("exitPlaying");var originStyle,guide=this.get("guide")[0],sample=this.get("sample")[0],origin=this.get("controller.origin"),transform="perspective(2000px) "+this.get("controller.draftEffectText");guide.style[window._jcsspfx+"Transform"]=transform,this.set("transform",transform),Ember.isEmpty(origin)?(guide.style[window._jcsspfx+"TransformOrigin"]="",sample.style[window._jcsspfx+"TransformOrigin"]=""):(originStyle=(null!=origin.x?origin.x:"50")+"% "+(null!=origin.y?origin.y:"50")+"% "+(null!=origin.z?origin.z:"0")+"px",guide.style[window._jcsspfx+"TransformOrigin"]=originStyle,sample.style[window._jcsspfx+"TransformOrigin"]=originStyle)}.observes("controller.draftEffectText","controller.origin","controller.ease","controller.duration"),actions:{play:function(){if(this.get("isPlayingMode"))return this.get("timeline").paused(!1),void this.set("isPlaying",!0);var ease,tween,sample=this.get("sample"),guide=this.get("guide"),transform=this.get("transform"),timelineSlider=this.get("timelineSlider"),timeline=new JTweenTimeline(null,0,null,{repeatCount:0});this.set("timeline",timeline),guide.css("display","none"),timelineSlider.css("display",""),"show"===this.get("controller.type")?(sample.css(window._jcsspfx+"Transform",transform),this.get("controller.draftEffect.fade")&&sample.css("opacity",0),ease=window.convertEaseName(this.get("controller.ease")),tween=new JTween(sample[0],Number(this.get("controller.duration")),{transform:JTween.resetTransform(transform),opacity:1},{ease:ease})):(ease=window.convertEaseName(this.get("controller.ease")),tween=new JTween(sample[0],Number(this.get("controller.duration")),{transform:transform,opacity:this.get("controller.draftEffect.fade")?0:1},{ease:ease})),timeline.addTween(0,tween),timeline.calculateDuration(),timeline.paused(!1),this.set("isPlaying",!0),this.set("isPlayingMode",!0);timeline.onChange=function(){timelineSlider.slider("value",100*timeline.calculatedPosition/timeline.duration)}},pause:function(){this.get("isPlaying")&&(this.get("timeline").paused(!0),this.set("isPlaying",!1))},exitPlaying:function(){if(this.get("isPlayingMode")){this.set("isPlayingMode",!1),this.send("pause");var timeline=this.get("timeline"),tween=this.get("tween"),sample=this.get("sample"),guide=this.get("guide"),timelineSlider=this.get("timelineSlider");timeline.removeTween(tween),timeline.paused(!0),timeline.onChange=null,timeline=null,tween=null,this.set("tween",null),this.set("timeline",null),timelineSlider.css("display","none"),sample.css("opacity","").css(window._jcsspfx+"Transform",""),guide.css("display","")}}}}),MSPanel.EffectList=Ember.View.extend({classNames:["msp-section msp-effect-list"],template:Ember.Handlebars.compile('<div class="msp-section-handle"><span class="msp-section-title">'+__MSP_LAN.ee_001+'</span></div><div class="msp-section-content"><div class="msp-effect-list-cont">{{#each effect in presetEffects}}{{view MSPanel.EffectRow effect=effect}}{{/each}}</div></div>')}),MSPanel.EffectRow=Ember.View.extend({classNames:["msp-effect-row"],classNameBindings:["selected:active"],effect:null,selected:!1,template:Ember.Handlebars.compile('<span class="msp-effect-name">{{effect.name}}</span><a {{action "removeEffect" effect target=view bubbles=false}} class="msp-effect-remove"><span class="msp-ico msp-ico-grayremove"></span></a>'),click:function(){this.set("controller.currentEffect",this.get("effect")),this.get("controller").updateDraft(this.get("effect"))},onSelectChanged:function(){this.get("effect")===this.get("controller.currentEffect")?this.set("selected",!0):this.set("selected",!1)}.observes("controller.currentEffect").on("init"),actions:{removeEffect:function(effect){confirm('Are you sure want to delete "'+effect.get("name")+'"?')&&this.get("controller").send("removeEffect",effect),this.get("parentView").updatePresetEffects()}}}),function($){MSPanel.ButtonEditor=Ember.View.extend({classNames:["mps-button-editor"],layer:null,template:Ember.Handlebars.compile('<div class="left-box">{{view MSPanel.ButtonPreview layer=view.layer}}<div class="msp-section-content">{{partial "button-properties"}}</div><div class="msp-applystyle-cont"><button {{action "applyStyle"}} class="msp-blue-btn msp-applystyle">'+(__MSP_LAN.be_001||"Update Button Style")+'</button><button {{action "saveAsPreset"}} class="msp-gray-btn msp-savepreset">'+(__MSP_LAN.be_002||"Save As New Button")+"</button></div></div>{{view MSPanel.ButtonList}}"),didInsertElement:function(){var that=this;this.$().dialog({resizable:!1,modal:!0,width:1e3,height:660,title:__MSP_LAN.be_005||"Button Editor",draggable:!1,show:"fade",dialogClass:"msp-dialog",appendTo:this.get("parentView").$(),dialogClass:"msp-container msp-dialog",close:function(){that.get("controller").send("cancel"),that.get("controller.parent").closeButtonEditor()}}),$(window).bind("resize",{ref:this},this.onWindowResize)},onWindowResize:function(event){var that=event.data.ref;that.$().dialog("option","position","center")},willDestroyElement:function(){$(window).unbind("resize",this.onWindowResize),this.$().dialog("destroy")}});var STAGE_WIDTH=780,STAGE_HEIGHT=150;MSPanel.ButtonPreview=Ember.View.extend({classNames:["msp-section","msp-style-preview"],template:Ember.Handlebars.compile('<div class="msp-style-preview-cont"><div class="msp-style-sample" id="sample"><a href="#" {{bind-attr class=":ms-btn controller.draftBtnStyle controller.draftBtnSize"}} id="btn">Button</a></div><div id="bgToggle" class="bgToggle"></div></div>'),didInsertElement:function(){var sample=this.$("#sample"),btn=this.$("#btn");this.set("sample",sample);var that=this;this.$("#bgToggle").click(function(){var $this=$(this);$this.data("isBlack")?(that.$().css("background-color","white"),$this.css("background-color","#222"),$this.data("isBlack",!1)):($this.data("isBlack",!0),that.$().css("background-color","#222"),$this.css("background-color","white"))}).css("background-color","#222"),sample.on({mouseover:function(){btn.attr("style",that.get("controller.draftNormal")+";"+that.get("controller.draftHover"))},mouseout:function(){btn.attr("style",that.get("controller.draftNormal"))},mousedown:function(){btn.attr("style",that.get("controller.draftNormal")+";"+that.get("controller.draftHover")+";"+that.get("controller.draftActive"))},mouseup:function(){btn.trigger("mouseover")},click:function(e){e.preventDefault()}}),this.update()},alignCenter:function(){var sample=this.get("sample");sample.css("left",(STAGE_WIDTH-sample.outerWidth())/2).css("top",(STAGE_HEIGHT-sample.outerHeight())/2)},update:function(){this.get("sample").trigger("mouseout");var that=this;setTimeout(function(){that.alignCenter()},10)}.observes("controller.draftNormal","controller.draftBtnStyle","controller.draftBtnSize")}),MSPanel.ButtonList=Ember.View.extend({classNames:["msp-section msp-style-list"],template:Ember.Handlebars.compile('<div class="msp-section-handle"><span class="msp-section-title">'+(__MSP_LAN.be_004||"Buttons")+'</span></div><div class="msp-section-content"><div class="msp-style-list-cont">{{#each button in controller}}{{view MSPanel.ButtonRow button=button}}{{/each}}</div></div>')}),MSPanel.ButtonRow=Ember.View.extend({classNames:["msp-style-row","msp-be-btn-row"],classNameBindings:["selected:active"],button:null,selected:!1,template:Ember.Handlebars.compile('<span {{bind-attr class=":ms-btn button.style button.size button.className"}}>Button</span><a {{action "removeButton" button target=view bubbles=false}} class="msp-style-remove"><span class="msp-ico msp-ico-grayremove"></span></a>'),click:function(){this.set("controller.currentButton",this.get("button"))},onSelectChanged:function(){this.get("button")===this.get("controller.currentButton")?this.set("selected",!0):this.set("selected",!1)}.observes("controller.currentButton").on("didInsertElement"),actions:{removeButton:function(button){confirm(__MSP_LAN.be_003||"Are you sure you want to delete this button?")&&this.get("controller").send("removeButton",button)}}})}(jQuery),MSPanel.ControlBtn=Ember.View.extend({control:null,tagName:"div",active:!1,classNames:["msp-control-btn"],classNameBindings:["active:msp-blue-btn"],template:Ember.Handlebars.compile('<span class="msp-control-label">{{view.control.label}}</span><a href="#" {{action "removeControl" target=view bubbles=false}}><span class="msp-control-removes msp-ico msp-ico-whiteremove"></span></a>'),didInsertElement:function(){},onActiveChange:function(){this.set("active",this.get("controller.currentControl")===this.get("control")),this.get("active")&&this.get("controller").send("showControlOptions")}.observes("controller.currentControl").on("init"),click:function(){this.get("active")||this.set("controller.currentControl",this.get("control"))},actions:{removeControl:function(){confirm('Are you sure want to remove "'+this.get("control.label")+'" control?')&&this.get("controller").send("removeControl",this.get("control"))}}}),MSPanel.TemplatesView=Ember.View.extend({templateName:"TemplatesModal",didInsertElement:function(){var that=this;this.$().dialog({resizable:!1,modal:!0,width:925,height:Math.max(350,window.innerHeight-100),title:__MSP_LAN.tv_001,draggable:!1,show:"fade",appendTo:MSPanel.rootElement,dialogClass:"msp-container msp-dialog",close:function(){that.get("controller").send("closeTemplates")}}),$(window).bind("resize",{ref:this},this.onWindowResize)},onWindowResize:function(event){var that=event.data.ref;that.$().dialog("option","height",Math.max(350,window.innerHeight-100)).dialog("option","position","center")},willDestroyElement:function(){$(window).unbind("resize",this.onWindowResize),this.$().dialog("destroy")}}),MSPanel.TemplateFigure=Ember.View.extend({msTemplate:null,selected:!1,classNames:["msp-template-figure"],classNameBindings:["selected:selected"],template:Ember.Handlebars.compile('{{#if view.selected}} <div class="msp-templte-selected"></div> {{/if}}<img {{bind-attr src=view.msTemplate.img}}><div class="msp-template-caption"><span>{{view.msTemplate.name}}</span></div>'),click:function(){this.set("controller.draftMSTemplate",this.get("msTemplate.value"))},templateChange:function(){this.set("selected",this.get("msTemplate.value")===this.get("controller.draftMSTemplate"))}.observes("controller.draftMSTemplate").on("init")}),function($){function WPEditorTemplate(id){var newEditor=$(hiddenEditor);return newEditor.find("link").remove(),newEditor.html().replace(/msp-hidden/g,id)}MSPanel.MetaBoxComponent=Ember.Component.extend({tagName:"div",classNames:["msp-metabox"],layout:Ember.Handlebars.compile('<div class="msp-metabox-handle"><h3 class="msp-metabox-title">{{title}}</h3><div class="msp-metabox-toggle"></div></div>{{yield}}<div class="clear"> </div>')}),Ember.TEMPLATES["components/tabs-panel"]=Ember.Handlebars.compile("{{yield}}"),MSPanel.TabsPanelComponent=Ember.Component.extend({tagName:"div",attributeBindings:["id"],classNames:["msp-metabox msp-metabox-tabs"],didInsertElement:function(){this.$().avertaLiveTabs()}}),MSPanel.SwitchBoxComponent=Ember.Component.extend({classNames:["msp-switchbox"],offlable:"OFF",onlable:"ON",value:!1,layout:Ember.Handlebars.compile('<div class="msp-switch-cont"><span class="msp-switch-off">{{view.offlable}}</span><div class="msp-switch-handle"></div><span class="msp-switch-on">{{view.onlable}}</span></div>'),click:function(){var that=this;that.set("value",!that.get("value"))},update:function(){this.get("value")?this.$().addClass("switched"):this.$().removeClass("switched")}.observes("value").on("didInsertElement")}),MSPanel.AddDynamicTag=Ember.View.extend({classNames:["msp-add-dynamic-tags"],editorId:null,template:Ember.Handlebars.compile('<button {{action "addTag" target=view}} class="msp-add-btn"><span class="msp-ico msp-ico-whiteadd"></span></button><div class="msp-ddlist"></div>'),didInsertElement:function(){for(var select=$("<select></select>").appendTo(this.$(".msp-ddlist")).width(220),i=0,l=MSPanel.dynamicTags.length;i!==l;i++)select.append('<option value="'+MSPanel.dynamicTags[i].tag+'">'+MSPanel.dynamicTags[i].name+"</option>");this.set("select",select)},actions:{addTag:function(){var id=this.get("editorId");tinymce&&$("#wp-"+id+"-wrap").hasClass("tmce-active")?tinymce.get(id).execCommand("insertHTML",!1,this.get("select").val()):$("#"+id).insertAtCaret(this.get("select").val())}}});var hiddenEditor=jQuery("#mspHiddenEditor")[0].outerHTML,__tmc_msp_id=0;MSPanel.WPEditor=Ember.View.extend({classNames:["msp-wp-editor"],_id:null,template:null,tab:null,tabs:null,onInit:function(){var id="msp-wpeditor-"+__tmc_msp_id;this.set("_id",id),this.set("template",Ember.Handlebars.compile(WPEditorTemplate(id))),__tmc_msp_id++}.on("init"),didInsertElement:function(){var tabs=this.get("tabs");return Ember.isEmpty(tabs)?void this.createEditor():void $("#"+tabs).bind("avtTabChange",{that:this},this.refreshEditor)},refreshEditor:function(event,tab){var that=event.data.that;that.get("tab")===tab&&that.createEditor()},createEditor:function(){if(this.get("inited")!==!0){this.set("inited",!0);var id=this.get("_id"),that=this;if(window.tinymce){var settings=$.extend({},window.tinyMCEPreInit.mceInit["msp-hidden"]||{});settings.forced_root_block="",settings.force_br_newlines=!0,settings.force_p_newlines=!1,settings.wpautop=!1,"3"==tinyMCE.majorVersion?(settings.body_class=settings.elements=id,settings.setup=function(ed){ed.onInit.add(function(){that.initEditor(tinyMCE.getInstanceById(id))
})},tinymce.init(settings)):"4"==tinyMCE.majorVersion&&(settings.body_class="content post-type-post post-status-auto-draft post-format-standard",settings.selector="#"+id,settings.setup=function(ed){ed.on("init",function(){that.initEditor(tinyMCE.get(id))})},tinymce.init(settings))}var qtags,qtagSettings=$.extend({},window.tinyMCEPreInit.qtInit["msp-hidden"]||{});qtagSettings.id=id,"function"==typeof QTags&&(qtags=quicktags(qtagSettings),QTags.buttonsInitDone=!1,QTags._buttonsInit(),that.set("qtags",qtags),window.tinymce?switchEditors.go(id,"html"):this.onValueChanged(),this.$("textarea#"+this.get("_id")).on("change keyup paste",function(){that.set("value",$(this).val())}))}},initEditor:function(mce){function internalUpdate(){that.set("internalChange",!0),that.set("value",mce.getContent()),that.set("internalChange",!1)}var id=this.get("_id"),that=(this.get("value"),this);this.$(".wp-editor-wrap").on("mousedown",function(){wpActiveEditor=id}),"3"==tinyMCE.majorVersion?(mce.onChange.add(internalUpdate),mce.onKeyUp.add(internalUpdate)):"4"==tinyMCE.majorVersion&&(mce.on("change",internalUpdate),mce.on("keyup",internalUpdate)),this.$().click(internalUpdate),setTimeout(function(){switchEditors.go(id,"html"),switchEditors.go(id,"tmce")},100),this.set("mce",mce),this.onValueChanged()},onValueChanged:function(){if(this.get("inited")){var value=this.get("value");if(this.$("textarea#"+this.get("_id")).val(value),this.get("internalChange"))return void this.set("internalChange",!1);if(window.tinymce){var mce=this.get("mce");Ember.isEmpty(mce)||null==value?null==value&&mce.setContent(" "):mce.setContent(value)}}}.observes("value"),willDestroyElement:function(){if(this.get("inited")){window.tinymce&&tinymce.remove(this.get("_id"));var qtags=this.get("qtags");qtags&&($(qtags.toolbar).remove(),qtags.toolbar=null,qtags=null,QTags.instances[this.get("_id")]&&delete QTags.instances[this.get("_id")],this.$("textarea#"+this.get("_id")).remove());var tabs=this.get("tabs");Ember.isEmpty(tabs)||$("#"+tabs).unbind("avtTabChange",this.refreshEditor)}}}),jQuery.ui&&jQuery.ui.spinner&&(jQuery.ui.spinner.prototype._events.mousewheel=function(event,delta){if(delta&&this.element.is(":focus")){if(!this.spinning&&!this._start(event))return!1;this._spin((delta>0?1:-1)*this.options.step,event),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(event)},100),event.preventDefault()}}),MSPanel.NumberInputView=Ember.View.extend({step:1,min:0,tagName:"input",attributeBindings:["type"],lastValue:null,type:"text",didInsertElement:function(){var that=this,input=this.$(),updateValue=function(){var value=input.spinner("value");that.set("internalChange",!0),isNaN(value)||null==value?that.set("value",void 0):that.set("value",parseFloat(value))};input.on("change",updateValue).spinner({step:this.get("step"),numberFormat:"n",min:this.get("min"),max:this.get("max"),spin:updateValue,stop:updateValue}).spinner("value",this.get("value"))},onValueChanged:function(){this.get("internalChange")&&this.set("internalChange",!1),this.$().spinner("value",this.get("value"))}.observes("value")}),Ember.Handlebars.helper("number-input",MSPanel.NumberInputView),MSPanel.ColorPickerComponent=Ember.Component.extend({tagName:"input",classNames:"msp-color-picker",value:null,didInsertElement:function(){var that=this;this.$().spectrum({color:this.get("value"),allowEmpty:!0,showInput:!0,showAlpha:!0,clickoutFiresChange:!0,preferredFormat:"hex6",change:function(color){null===color?that.set("value",null):that.set("value",color.toString())}})},willDestroyElement:function(){this.$().spectrum("destroy")},onValueChanged:function(){this.$().spectrum("set",this.get("value"))}.observes("value")}),MSPanel.DropdwonListComponent=Ember.Component.extend({tagName:"div",classNames:["msp-ddlist"],layout:Ember.Handlebars.compile("<select>{{yield}}</select>"),value:null,width:100,didInsertElement:function(){var that=this;this.$("select").on("change",function(){var option=that.$("select option:selected");that.set("value",option.attr("value"))}).width(this.get("width")),this.onValueChanged()},onValueChanged:function(){Ember.isEmpty(this.get("value"))||this.$("select").val(this.get("value"))}.observes("value")}),MSPanel.MultiDropdwonListComponent=Ember.Component.extend({tagName:"div",classNames:["msp-ddlist","msp-ddlist-multiselect"],layout:Ember.Handlebars.compile("<select {{bind-attr size=view.size}} multiple>{{yield}}</select>"),value:null,width:100,size:7,didInsertElement:function(){var that=this;this.$("select").on("change",function(){that.set("value",$(this).val())}).width(this.get("width")),this.onValueChanged()},onValueChanged:function(){Ember.isEmpty(this.get("value"))||this.$("select").val(this.get("value"))}.observes("value")}),MSPanel.GoogleFontsComponent=Ember.Component.extend({tagName:"div",classNames:["msp-ddlist","msp-gfonts-select"],defaultTemplate:Ember.Handlebars.compile('<select><option value="--" selected>Loading fonts..</option></select>'),value:null,variants:null,width:180,didInsertElement:function(){var that=this;GFonts.getList(function(){that.$("select").html('<option value="--" selected>-- select --</option>'+GFonts.generateSelectList()),that.onValueChanged(),that.$("select").trigger("change")}),this.$("select").on("change",function(){var option=that.$("select option:selected");"--"===option.val()?(that.set("value",void 0),that.set("variants",void 0)):(that.set("value",option.attr("value")),that.set("variants",option.attr("data-variants")))}).width(this.get("width")),that.onValueChanged()},onValueChanged:function(){this.$("select").val(Ember.isEmpty(this.get("value"))?"--":this.get("value"))}.observes("value")}),MSPanel.GoogleFontWeightsComponent=Ember.Component.extend({tagName:"div",classNames:["msp-ddlist","msp-gfonts-select msp-gfonts-weight"],defaultTemplate:Ember.Handlebars.compile("<select></select>"),variants:null,value:null,width:120,didInsertElement:function(){var that=this;this.$("select").on("change",function(){var option=that.$("select option:selected");return 0===option.length?void that.$("select").val("normal"):void("--"===option.val()?that.set("value",null):that.set("value",option.attr("value")))}).width(this.get("width")),that.updateVariants()},updateVariants:function(){var variants=this.get("variants");if(Ember.isEmpty(variants))this.$("select").html("<option>Select font</option>");else{var options="",value=this.get("value");variants=variants.split(",");for(var i=0,l=variants.length;i!==l;i++)-1===variants[i].indexOf("italic")&&(options+="regular"===variants[i]?'<option value="normal"'+("normal"===value?"selected":"")+">Normal</option>":'<option value="'+variants[i]+'"'+(value===variants[i]?"selected":"")+">"+variants[i]+"</option>");this.$("select").html(options).trigger("change")}}.observes("variants")}),MSPanel.CodeMirrorComponent=Ember.Component.extend({classNames:["msp-codemirror"],width:250,height:200,mode:"css",tab:null,tabs:null,layout:Ember.Handlebars.compile("<textarea>{{yield}}</textarea>"),didInsertElement:function(){this.$().width(this.get("width")).height(this.get("height"));var that=this,editor=CodeMirror.fromTextArea(this.$(">textarea")[0],{lineNumbers:!0,mode:this.get("mode")});editor.on("change",function(){that.set("internalChange",!0),that.set("value",editor.getValue())}),this.set("editor",editor);var value=this.get("value");Ember.isEmpty(value)||editor.setValue(value);var tabs=this.get("tabs");Ember.isEmpty(tabs)||$("#"+tabs).bind("avtTabChange",{that:this},this.refreshEditor)},onValueChanged:function(){return this.get("internalChange")===!0?void this.set("internalChange",!1):(this.get("editor").setValue(this.get("value")),void this.set("internalChange",!1))}.observes("value"),refreshEditor:function(event,tab){var that=event.data.that;that.get("tab")===tab&&that.get("editor").refresh()},willDestroyElement:function(){var tabs=this.get("tabs");Ember.isEmpty(tabs)||$("#"+tabs).unbind("avtTabChange",this.refreshEditor);var editor=this.get("editor");editor.toTextArea(),editor=null,this.set("editor",null)}});for(var patterns='<div class="msp-pattern-prev ms-pattern"></div>',i=1;30>=i;i++)patterns+='<div class="msp-pattern-prev ms-pattern ms-patt-'+i+'" data-pattern="ms-patt-'+i+'" style="'+(i>15?"background-color:black;":"")+'"></div>';MSPanel.PatternPickerComponent=Ember.Component.extend({tagName:"div",classNames:["msp-pattern-picker"],value:null,patternBoxIsOpen:!1,layout:Ember.Handlebars.compile('<div class="msp-pattern-control sp-replacer sp-light"><div {{bind-attr class=":ms-pattern-preview :ms-pattern view.value"}}></div><div class="sp-dd">â¼</div></div><div class="msp-patterns-box">'+patterns+"</div>"),didInsertElement:function(){this.$(".msp-pattern-control").on("click",{that:this},this.togglePatternbox),$(document).on("click",{that:this},this.closePatternbox),this.$(".msp-patterns-box").css("display","none").on("click",function(e){e.stopPropagation()}).find(".ms-pattern").on("click",{that:this},this.selectPattern)},togglePatternbox:function(e){var that=e.data.that;e.stopPropagation(),that.get("patternBoxIsOpen")&&that.closePatternbox(e),that.$(".msp-patterns-box").css("display",""),that.set("patternBoxIsOpen",!0)},closePatternbox:function(e){var that=e.data.that;that.get("patternBoxIsOpen")&&(that.$(".msp-patterns-box").css("display","none"),that.set("patternBoxIsOpen",!1))},selectPattern:function(e){e.stopPropagation();var that=e.data.that;that.set("value",$(this).data("pattern"))},willDestroyElement:function(){this.$(".msp-patterns-box").off("click",this.togglePatternbox).find(".ms-pattern").off("click"),$(document).off("click",this.closePatternbox)}})}(jQuery),MSPanel.pushData=null,MSPanel.ApplicationController=Ember.Controller.extend({isFlickr:"flickr"===__MSP_TYPE,isFacebook:"facebook"===__MSP_TYPE,isPost:"post"===__MSP_TYPE,isWcproduct:"wc-product"===__MSP_TYPE,sliderId:MSPanel.SliderID,isSending:!1,statusMsg:"",hasError:!1,onInit:function(){window.$||(window.$=jQuery.noConflict()),MSPanel.Settings.find(),MSPanel.Slide.find(),MSPanel.Layer.find(),MSPanel.Style.find(),MSPanel.Effect.find(),MSPanel.PresetStyle.find(),MSPanel.PresetEffect.find(),MSPanel.Control.find(),MSPanel.Callback.find(),MSPanel.ButtonStyle.find(),this.set("disableControls",MSPanel.Settings.find(0).get("disableControls"));var that=this;MSPanel.pushData=function(){that.prepareData()},MSPanel.createButton=this.createButton,"wc-product"===__MSP_TYPE&&null==__MSP_POST&&null!=__WC_INSTALL_URL&&(this.set("hasError",!0),this.set("errorTemplate","wooc-error"),this.set("wooLink",__WC_INSTALL_URL)),this.generateButtonStyles(),this.set("shortCode",'[masterslider id="'+this.get("sliderId")+'"]'),this.set("phpFunction","<?php masterslider("+this.get("sliderId")+"); ?>"),jQuery("#panelLoading").remove(),window._msp_init_timeout&&clearTimeout(window._msp_init_timeout),$(window).scroll(function(){$(window).scrollTop()+$(window).height()>=$(document).height()-45?($("#saveBar").removeClass("msp-sticky-bar"),$("#saveBarPlaceHolder").css("display","none")):($("#saveBar").addClass("msp-sticky-bar"),$("#saveBarPlaceHolder").css("display",""))}).trigger("scroll"),$("#timeAgo").timeago(),setInterval($.proxy(this.updateSavedTime,this),3e4),$(document).bind("keydown",function(e){return(e.metaKey||e.ctrlKey)&&83==e.which?(e.preventDefault(),that.get("isSending")||that.send("saveAll"),!1):void 0})}.on("init"),updateSliderSlugShortCodes:function(){var alias=this.get("sliderSlug");Ember.isEmpty(alias)&&(alias=MSPanel.SliderSlug),this.set("shortCodeSlug",'[masterslider alias="'+alias+'"]'),this.set("phpFunctionSlug",'<?php masterslider("'+alias+'"); ?>')}.observes("sliderSlug").on("init"),prepareData:function(){var fonts={},font_str="";MSPanel.Style.find().forEach(function(record){var font=record.get("fontFamily"),weight=record.get("fontWeight");Ember.isEmpty(font)||(fonts[font]||(fonts[font]=[]),"normal"===weight&&(weight="regular"),Ember.isEmpty(weight)||-1!==fonts[font].indexOf(weight)||fonts[font].push(weight))});for(var font in fonts)font_str+=font.replace(/\s/,"+")+":"+fonts[font].join(",")+"|";MSPanel.Settings.find(1).set("usedFonts",font_str.slice(0,-1)),this.saveRecords(MSPanel.Settings.find()),this.saveRecords(MSPanel.Slide.find()),this.saveRecords(MSPanel.Layer.find()),this.saveRecords(MSPanel.Style.find()),this.saveRecords(MSPanel.Effect.find()),this.saveRecords(MSPanel.PresetStyle.find()),this.saveRecords(MSPanel.PresetEffect.find()),this.saveRecords(MSPanel.Control.find()),this.saveRecords(MSPanel.Callback.find()),this.saveRecords(MSPanel.ButtonStyle.find())},generateButtonStyles:function(){var styles=MSPanel.ButtonStyle.find(),css="",$styleElement=$("#msp-buttons");styles.forEach(function(style){css+="."+style.get("className")+" {"+style.get("normal")+"}\n."+style.get("className")+":hover {"+style.get("hover")+"}\n."+style.get("className")+":active {"+style.get("active")+"}\n"}),0===$styleElement.length?$styleElement=$('<style id="msp-buttons"></style>').text(css).appendTo($("head")):$styleElement.text(css)},actions:{saveAll:function(){this.prepareData(),this.sendData()},showPreview:function(event){window.lunchMastersliderPreview&&lunchMastersliderPreview(event)}},saveRecords:function(records){records.forEach(function(record){record.save()})},sendData:function(){this.set("statusMsg",__MSP_LAN.ap_001),this.set("isSending",!0),this.set("savingStatus","msp-saving");var that=this;jQuery.post(__MS.ajax_url,{action:"msp_panel_handler",nonce:jQuery("#msp-main-wrapper").data("nonce"),msp_data:B64.encode(JSON.stringify(MSPanel.data)),preset_style:B64.encode(JSON.stringify(MSPanel.PSData)),preset_effect:B64.encode(JSON.stringify(MSPanel.PEData)),buttons:B64.encode(JSON.stringify(MSPanel.PBData)),slider_id:MSPanel.SliderID},function(res){that.set("statusMsg",res.message),that.set("isSending",!1),res.success===!0?(that.set("savingStatus","msp-save-succeed"),that.startAutoHideMsg()):that.set("savingStatus","msp-save-error")})},startAutoHideMsg:function(){var timeout=this.get("msgTimeout"),that=this;Ember.isEmpty(timeout)||clearTimeout(timeout),this.set("timeout",setTimeout(function(){that.set("savingStatus","msp-save-hide msp-save-succeed"),$("#timeAgo").attr("title",(new Date).toISOString()),that.updateSavedTime()},2e3))},updateSavedTime:function(){var timeEle=$("#timeAgo");timeEle.attr("title")&&$("#timeAgo").timeago("updateFromDOM")},createButton:function(normal,hover,active,style,size){var newPreset=MSPanel.ButtonStyle.create({normal:normal,hover:hover,active:active,size:size,style:style});newPreset.save(),newPreset.set("className","msp-preset-btn-"+newPreset.get("id")),newPreset.save()}}),MSPanel.getLayerResponsiveOffsetKey=function(bp,axis){return"x"===axis?"desktop"===bp?"offsetX":bp+"OffsetX":"desktop"===bp?"offsetY":bp+"OffsetY"},MSPanel.getLayerResponsiveOriginKey=function(bp){return"desktop"===bp?"origin":bp+"Origin"},MSPanel.getResponsiveKey=function(bp,key){return"desktop"===bp?key:bp+key.charAt(0).toUpperCase()+key.slice(1)},MSPanel.getResponsiveValue=function(target,mapper,bp){const bpArr=["phone","tablet","desktop"],sliceBp=(mapper(bp),bpArr.slice(bpArr.indexOf(bp)));var value;return target?(sliceBp.every(function(currentKey){const mapped=mapper(currentKey);return Ember.isEmpty(target.get(mapped))?!0:(value=target.get(mapped),!1)}),value):null},MSPanel.getResponsiveOffset=function(bp,layer){return{x:MSPanel.getResponsiveValue(layer,function(bp){return MSPanel.getLayerResponsiveOffsetKey(bp,"x")},bp),y:MSPanel.getResponsiveValue(layer,function(bp){return MSPanel.getLayerResponsiveOffsetKey(bp,"y")},bp)}},MSPanel.getResponsiveOrigin=function(bg,layer){return MSPanel.getResponsiveValue(layer,MSPanel.getLayerResponsiveOriginKey,bp)},MSPanel.SettingsController=Ember.ObjectController.extend({customSlider:window.__MSP_TYPE&&"custom"===window.__MSP_TYPE,templateSlider:window.__MSP_TYPE&&("flickr"===window.__MSP_TYPE||"post"===window.__MSP_TYPE||"wc-product"===window.__MSP_TYPE||"facebook"===window.__MSP_TYPE),sliderSkins:__MSP_SKINS,needs:["application","controls"],msTemplateName:null,msTemplateImg:null,draftMSTemplate:null,templates:MSPanel.SliderTemplates,showAutoHeight:!1,showNearbyNum:!1,showWrapperWidth:!1,preloadMethod:null,setup:function(){var preload=this.get("preload");"all"===preload||"-1"===preload?this.set("preloadMethod",preload):this.set("preloadMethod","nearby"),this.set("draftMSTemplate",this.get("msTemplate")),this.updateTemplate(!0),this.send("checkSliderSlug")},sliderLayoutChanged:function(){var layout=this.get("layout");"fullscreen"===layout||"autofill"===layout?(this.set("showAutoHeight",!1),this.set("autoHeight",!1)):this.set("showAutoHeight",!0),this.set("showWrapperWidth","boxed"===layout||"partialview"===layout),this.set("showAutoFillTarget","autofill"===layout),this.set("showMinHeight","fullscreen"!==layout&&"autofill"!==layout&&!this.get("autoHeight")),this.set("showFSMargin","fullscreen"===layout)}.observes("layout","autoHeight").on("setup"),preloadSetup:function(){var preloadMethod=this.get("preloadMethod");if("nearby"===preloadMethod){this.set("showNearbyNum",!0);var preload=this.get("preload");("all"===preload||"-1"===preload)&&this.set("preload","0")}else this.set("showNearbyNum",!1),this.set("preload",preloadMethod)}.observes("preloadMethod").on("setup"),updateTemplate:function(init){var templateObject,msTemplate=this.get("msTemplate");if(this.get("templates").forEach(function(template){return template.value===msTemplate?void(templateObject=template):void 0}),templateObject){if(this.set("msTemplateName",templateObject.name),this.set("msTemplateImg",templateObject.img),this.set("msTemplateClass",templateObject.className),this.set("controllers.application.disableControls",templateObject.disableControls),this.set("disableControls",templateObject.disableControls),!init){for(var controlObj,control,controllController=this.get("controllers.controls"),controls=MSPanel.Control.find();controls.get("firstObject");){var control=controls.get("firstObject");controllController.findControlObj(control.get("name")).used=!1,control.deleteRecord()}for(var controlName in templateObject.controls)controlObj=controllController.findControlObj(controlName),control=MSPanel.Control.create($.extend(!0,controllController.getDefaultValues(controlName),templateObject.controls[controlName])),control.set("label",controlObj.label),controlObj.used=!0,control.save();for(var option in templateObject.settings)this.set(option,templateObject.settings[option])}}else this.set("draftMSTemplate","custom"),this.updateTemplate()},onDeepLinkChange:function(){var deepLink=this.get("deepLink");Ember.isEmpty(deepLink)&&this.set("deepLink","ms-"+MSPanel.SliderID)}.observes("deepLink").on("setup"),actions:{openTemplates:function(){var templatesView=MSPanel.TemplatesView.create({controller:this});this.get("mainView").createChildView(templatesView),this.set("templatesView",templatesView),templatesView.appendTo(MSPanel.rootElement)},closeTemplates:function(){this.get("templatesView").destroy(),this.set("draftMSTemplate",this.get("msTemplate"))},saveTemplate:function(){return this.get("draftMSTemplate")===this.get("msTemplate")?void this.send("closeTemplates"):void(confirm(__MSP_LAN.tv_002)&&(this.set("msTemplate",this.get("draftMSTemplate")),this.send("closeTemplates"),this.updateTemplate()))},checkSliderSlug:function(){var slug=this.get("slug"),that=this;this.set("slugStatus","msp-saving"),Ember.isEmpty(slug)?(this.set("slug",MSPanel.SliderSlug),that.set("slugStatus","")):__MS.ajax_url?$.ajax({url:__MS.ajax_url,data:{slug:slug,id:MSPanel.SliderID,action:"ms-slug",nonce:jQuery("#msp-main-wrapper").data("nonce")}}).done(function(data){data.success?(that.set("slug",data.data),that.set("slugStatus","msp-save-succeed")):that.set("slugStatus","msp-save-error")}):that.set("slugStatus",""),this.set("controllers.application.sliderSlug",this.get("slug"))}}}),MSPanel.SlidesController=Ember.ArrayController.extend({needs:["flickr"],templateSlider:window.__MSP_TYPE&&("flickr"===window.__MSP_TYPE||"post"===window.__MSP_TYPE||"facebook"===window.__MSP_TYPE||"wc-product"===window.__MSP_TYPE),customSlider:window.__MSP_TYPE&&"custom"===window.__MSP_TYPE,_order:-1,bgImgSelector:null,sortProperties:["order"],stylesController:null,effectsController:null,buttonsController:null,layersList:[],layersController:null,mainView:null,isFirst:!0,currentSlide:null,activeBreakpoint:"desktop",setup:function(){if(Ember.isEmpty(this.get("sliderSettings.type"))&&this.set("sliderSettings.type",__MSP_TYPE),this.set("sliderSettings.sliderId",MSPanel.SliderID),0!==this.get("length")){var slide=this.get("firstObject");this.set("currentSlide",slide),this.updateLayersList(slide.get("layers")),this.updateOrder()}else this.get("templateSlider")&&(this.send("newSlide"),this.updateOrder());this.get("templateSlider")||this.generateOverlayLayersSlide()},duplicateSlide:function(slide){var slideProp=slide.toJSON();delete slideProp.id,delete slideProp.layers;var newSlide=MSPanel.Slide.create(slideProp);slide.get("layers").forEach(function(layer){var properties=layer.toJSON(),styleProp=layer.get("styleModel").toJSON(),showEffProp=layer.get("showEffect").toJSON(),hideEffProp=layer.get("hideEffect").toJSON();delete properties.id,delete styleProp.id,delete showEffProp.id,delete hideEffProp.id;var styleModel=MSPanel.Style.create(styleProp);styleModel.save(),properties.styleModel=styleModel;var showEffect=MSPanel.Effect.create(showEffProp);showEffect.save(),properties.showEffect=showEffect;var hideEffect=MSPanel.Effect.create(hideEffProp);hideEffect.save(),properties.hideEffect=hideEffect,properties.slide=newSlide;var newLayer=MSPanel.Layer.create(properties);if(newLayer.save(),"custom"===newLayer.get("styleModel.type")){var newClassName="msp-cn-"+MSPanel.SliderID+"-"+newLayer.get("id");newLayer.set("styleModel.className",newClassName),newLayer.set("className",newClassName),styleModel.save(),newLayer.save()}newSlide.get("layers").addObject(newLayer)}),newSlide.set("order",slide.get("order")+1),this.forEach(function(_slide){var slide_order=_slide.get("order"),nslide_order=newSlide.get("order");slide_order>=nslide_order&&_slide!==newSlide&&_slide.set("order",slide_order+1)}),newSlide.save(),this.updateOrder()},updateSlidesSort:function(indexes){this.beginPropertyChanges(),this.forEach(function(slide){slide.set("order",indexes[slide.get("id")])},this),this.endPropertyChanges(),this.set("_order",this.get("lastObject.order"))},updateOrder:function(){var i=0;this.forEach(function(slide){slide.get("isOverlayLayers")||slide.set("order",i++)}),this.set("_order",i-1)},removeSlide:function(slide){slide.get("layers").forEach(function(layer){layer.get("styleModel").deleteRecord(),layer.get("showEffect").deleteRecord(),layer.get("hideEffect").deleteRecord(),layer.deleteRecord()}),slide.deleteRecord(),0!==this.get("length")&&(this.send("select",this.get("firstObject")),this.updateOrder())},updateLayersList:function(layers){this.set("layersList",layers)},openStyleEditor:function(forLayer){var stylesController=this.get("stylesController");stylesController.addLayer(forLayer);var editorView=MSPanel.StyleEditor.create({controller:stylesController});this.get("mainView").createChildView(editorView),this.set("styleEditor",editorView),editorView.appendTo(MSPanel.rootElement)},closeStyleEditor:function(){var styleView=this.get("styleEditor");Ember.isEmpty(styleView)||(styleView.destroy(),this.set("styleView",null))},openEffectEditor:function(forLayer,type){var effectsController=this.get("effectsController");effectsController.addLayer(forLayer,type);var editorView=MSPanel.EffectEditor.create({controller:effectsController});this.get("mainView").createChildView(editorView),this.set("effectEditor",editorView),editorView.appendTo(MSPanel.rootElement)},closeEffectEditor:function(){var effectView=this.get("effectEditor");Ember.isEmpty(effectView)||(effectView.destroy(),this.set("effectView",null))},openButtonEditor:function(forLayer){var buttonsController=this.get("buttonsController");buttonsController.addLayer(forLayer);var editorView=MSPanel.ButtonEditor.create({controller:buttonsController});this.get("mainView").createChildView(editorView),this.set("buttonView",editorView),editorView.appendTo(MSPanel.rootElement)},closeButtonEditor:function(){var buttonView=this.get("buttonView");Ember.isEmpty(buttonView)||(buttonView.destroy(),this.set("buttonView",null))},onImageSelect:function(){var uploaderFrame=this.get("uploaderFrame"),selection=uploaderFrame.state().get("selection"),self=this;selection.map(function(attachment){attachment=attachment.toJSON(),self.generateSlide(attachment,attachment.url,(attachment.sizes.thumbnail||attachment.sizes.full).url)}),this.send("select",this.get("lastObject"))},generateSlide:function(attachment,bg,thumb){var slide=MSPanel.Slide.create({order:this.get("_order")+1,bg:bg,bgThumb:thumb,bgAlt:attachment.alt,bgTitle:attachment.title});this.set("_order",this.get("_order")+1),slide.save(),this.updateOrder()},generateOverlayLayersSlide:function(){var slide;this.forEach(function(_slide){_slide.get("isOverlayLayers")&&(slide=_slide)},this),slide||(slide=MSPanel.Slide.create({order:-1,isOverlayLayers:!0,msId:"overlayLayers"})),this.set("overlayLayersSlide",slide),slide.save()},actions:{addSlides:function(){var uploaderFrame=this.get("uploaderFrame");Ember.isEmpty(uploaderFrame)&&(uploaderFrame=wp.media.frames.frame=wp.media({title:__MSP_LAN.slc_001||"Select background image for new slide. (Multiple selection is available)",multiple:!0,frame:"select",library:{type:"image"},button:{text:__MSP_LAN.slc_002||"Create Slide(s)"}}),uploaderFrame.on("select",$.proxy(this.onImageSelect,this)),this.set("uploaderFrame",uploaderFrame)),uploaderFrame.open()},newSlide:function(){var slide=MSPanel.Slide.create({order:this.get("_order")+1});this.set("currentSlide",slide),this.set("_order",this.get("_order")+1),this.updateLayersList(slide.get("layers")),slide.save(),this.updateOrder()},select:function(slide){slide!==this.get("currentSlide")&&(this.set("currentSlide",slide),this.updateLayersList(slide.get("layers")))},changeActiveBreakpoint:function(breakpoint){breakpoint!==this.get("activeBreakpoint")&&this.set("activeBreakpoint",breakpoint)}}}),MSPanel.LayersController=Ember.ArrayController.extend({slide:null,currentLayer:null,_order:-1,sortProperties:["order"],sortAscending:!1,buttonClasses:null,layertypes:[{lable:__MSP_LAN.lc_001,value:"text"},{lable:__MSP_LAN.lc_002,value:"image"},{lable:__MSP_LAN.lc_006||"Button Layer",value:"button"},{lable:__MSP_LAN.lc_003,value:"video"},{lable:__MSP_LAN.lc_004,value:"hotspot"}],onSlideChanged:function(){this.set("slide",this.get("parentController.currentSlide")),this.get("isPreviewMode")&&this.send("exitPreviewMode"),this.send("clearSelect"),this.updateOrder()}.observes("parentController.currentSlide").on("init"),onInit:function(){this.set("parentController.layersController",this),this.set("sliderSettings",this.get("parentController.sliderSettings")),this.set("buttonClasses",MSPanel.ButtonStyle.find())}.on("init"),onModel:function(){this.updateOrder()}.observes("model"),updateLayersSort:function(indexes){this.beginPropertyChanges(),this.forEach(function(layer){layer.set("order",indexes[layer.get("id")])},this),this.endPropertyChanges()},updateOrder:function(){this.beginPropertyChanges();var i=this.get("length");this.forEach(function(layer){layer.set("order",--i)}),this.endPropertyChanges(),this.set("_order",this.get("length")-1)},duplicateLayer:function(layer){this.beginPropertyChanges();var properties=layer.toJSON(),styleProp=layer.get("styleModel").toJSON(),showEffProp=layer.get("showEffect").toJSON(),hideEffProp=layer.get("hideEffect").toJSON();delete properties.id,delete styleProp.id,delete showEffProp.id,delete hideEffProp.id;var styleModel=MSPanel.Style.create(styleProp);styleModel.save(),properties.styleModel=styleModel;var showEffect=MSPanel.Effect.create(showEffProp);showEffect.save(),properties.showEffect=showEffect;var hideEffect=MSPanel.Effect.create(hideEffProp);hideEffect.save(),properties.hideEffect=hideEffect,properties.slide=this.get("slide");var newLayer=MSPanel.Layer.create(properties);if(newLayer.save(),"custom"===newLayer.get("styleModel.type")){var newClassName="msp-cn-"+MSPanel.SliderID+"-"+newLayer.get("id");newLayer.set("styleModel.className",newClassName),newLayer.set("className",newClassName),styleModel.save(),newLayer.save()}this.get("slide.layers").addObject(newLayer),this.forEach(function(_layer){var layer_order=_layer.get("order"),nlayer_order=newLayer.get("order");layer_order>=nlayer_order&&_layer!==newLayer&&_layer.set("order",layer_order+1)}),newLayer.save(),this.endPropertyChanges()},removeLayer:function(layer){layer===this.get("currentLayer")&&(this.set("currentLayer",null),this.set("layerSettings",null)),layer.get("styleModel").deleteRecord(),layer.get("showEffect").deleteRecord(),layer.get("hideEffect").deleteRecord(),this.get("model").removeObject(layer),layer.deleteRecord(),this.updateOrder()},onLayerSelect:function(){null===this.get("currentLayer")?this.set("layerSettings","empty-template"):this.set("layerSettings",this.get("currentLayer.type")+"-layer-settings");var layerType=this.get("currentLayer.type");this.set("maskOptions","image"===layerType||"text"===layerType)}.observes("currentLayer"),onLayerPositionTypeChange:function(){var pos=this.get("currentLayer.position");"fixed"===pos?(this.set("fixedLayer",!0),this.set("staticLayer",!1)):"static"===pos?(this.set("fixedLayer",!1),this.set("staticLayer",!0)):(this.set("fixedLayer",!1),this.set("staticLayer",!1))}.observes("currentLayer.position"),willDestroyElement:function(){this.get("isPreviewMode")&&this.send("exitPreviewMode")},onLayerContentChanged:function(){MSPanel.dynamicTags&&"text"===this.get("currentLayer.type")&&this.set("currentLayer.dynamicContent",this._replcateDynamicTags(this.get("currentLayer.content")))}.observes("currentLayer","currentLayer.content"),_replcateDynamicTags:function(content){var i,tagObj,l=MSPanel.dynamicTags.length;return content.replace(/{{[\w-]+}}/g,function(match){for(i=0;i!==l;i++)if(tagObj=MSPanel.dynamicTags[i],match===tagObj.tag)return tagObj.generator(tagObj);return match})},updateDynamicContent:function(){var that=this;this.forEach(function(layer){"text"===layer.get("type")&&layer.set("dynamicContent",that._replcateDynamicTags(layer.get("content")))})},actions:{newLayer:function(type){var newLayer=MSPanel.Layer.create({slide:this.get("slide"),name:"layer",type:type,order:this.get("_order")+1});this.set("_order",this.get("_order")+1);var styleModel=MSPanel.Style.create();styleModel.save(),newLayer.set("styleModel",styleModel);var showEffect=MSPanel.Effect.create();showEffect.save(),newLayer.set("showEffect",showEffect);var hideEffect=MSPanel.Effect.create();hideEffect.save(),newLayer.set("hideEffect",hideEffect),newLayer.save(),this.get("model").addObject(newLayer),this.get("model").save()},selectLayer:function(layer){this.set("currentLayer",layer)},clearSelect:function(){this.set("currentLayer",null)},enterPreviewMode:function(){if(0!==this.get("length")){if(this.get("isPreviewMode"))return void this.send("resume");var tweenTimeline=new JTweenTimeline(null,0,null,{repeatCount:0});this.forEach(function(layer){var stageLayer=layer.get("stageLayer");stageLayer.registerTween(tweenTimeline)}),this.set("tweenTimeline",tweenTimeline),tweenTimeline.calculateDuration(),tweenTimeline.position(0),this.set("isPreviewMode",!0),this.set("isPlaying",!0);var that=this;tweenTimeline.onChange=function(){that.set("timelinePos",tweenTimeline.calculatedPosition)},this.set("currentLayer",null)}},exitPreviewMode:function(){if(this.get("isPreviewMode")){var tweenTimeline=this.get("tweenTimeline");this.forEach(function(layer){var stageLayer=layer.get("stageLayer");stageLayer.reset(tweenTimeline)}),tweenTimeline.paused(!0),this.set("tweenTimeline",null),tweenTimeline=null,this.set("isPlaying",!1),this.set("isPreviewMode",!1)}},resume:function(){this.get("isPlaying")||(this.get("tweenTimeline").paused(!1),this.set("isPlaying",!0))
},pause:function(){this.get("isPlaying")&&(this.get("tweenTimeline").paused(!0),this.set("isPlaying",!1))},openStyleEditor:function(){this.get("parentController").openStyleEditor(this.get("currentLayer"))},openEffectEditor:function(type){this.get("parentController").openEffectEditor(this.get("currentLayer"),type)},openButtonEditor:function(){this.get("parentController").openButtonEditor(this.get("currentLayer"))}}}),MSPanel.StylesController=Ember.ArrayController.extend({layer:null,presetCSS:null,draftStyle:null,draftStyleText:null,draftClassName:null,wordwrap:!0,fontVariants:null,lineHeight:null,addLayer:function(layer){this.set("layer",layer);var style_data=this.get("layer.styleModel").toJSON();delete style_data.id,this.set("draftStyle",MSPanel.Style.create(style_data)),this.set("draftClassName",this.get("layer.styleClass"));for(var key in style_data)this.get("draftStyle").addObserver(key,this,"onDraftChange");this.onDraftChange()},loadFont:function(){var font=this.get("draftStyle.fontFamily");Ember.isEmpty(font)||GFonts.load(font,this.get("fontVariants"))}.observes("draftStyle.fontFamily"),updateDraft:function(presetStyle){this.beginPropertyChanges();var presetStyle=presetStyle.toJSON();delete presetStyle.id;for(var key in presetStyle)"type"!==key&&this.set("draftStyle."+key,presetStyle[key]);this.set("presetClassName",presetStyle.className),this.set("presetCSS",this.styleObjectToString(presetStyle)),this.endPropertyChanges()},onWordwrap:function(){this.get("wordwrap")?this.set("draftStyle.whiteSpace",null):this.set("draftStyle.whiteSpace","nowrap")}.observes("wordwrap"),onBorderUpdate:function(){var allEmpty=Ember.isEmpty(this.get("draftStyle.borderTop"))&&Ember.isEmpty(this.get("draftStyle.borderBottom"))&&Ember.isEmpty(this.get("draftStyle.borderLeft"))&&Ember.isEmpty(this.get("draftStyle.borderRight"))&&Ember.isEmpty(this.get("draftStyle.borderColor"));Ember.isEmpty(this.get("draftStyle.borderStyle"))&&!allEmpty?this.set("draftStyle.borderStyle","solid"):allEmpty&&this.set("draftStyle.borderStyle",void 0)}.observes("draftStyle.borderTop","draftStyle.borderBottom","draftStyle.borderLeft","draftStyle.borderRight","draftStyle.borderColor"),lineHeightFix:function(){var lineHeight=this.get("lineHeight");Ember.isEmpty(lineHeight)?this.set("draftStyle.lineHeight","normal"):this.set("draftStyle.lineHeight",lineHeight+"px")}.observes("lineHeight"),onDraftChange:function(){this.set("draftStyleText",this.styleObjectToString(this.get("draftStyle").toJSON()))},actions:{applyStyle:function(){this.beginPropertyChanges();var draftStyleObj=this.get("draftStyle").toJSON();delete draftStyleObj.id,delete draftStyleObj.type,delete draftStyleObj.name;for(var key in draftStyleObj)this.set("layer.styleModel."+key,draftStyleObj[key]);var className,cssStr=this.styleObjectToString(draftStyleObj);this.get("layer.stageLayer").updateLayerStyle(this.cssToObject(cssStr)),cssStr!==this.get("presetCSS")?(className="msp-cn-"+MSPanel.SliderID+"-"+this.get("layer.id"),this.set("layer.styleModel.type","custom")):(className=this.get("presetClassName"),this.set("layer.styleModel.type","copy")),this.set("layer.styleModel.className",className),this.set("layer.className",className),this.endPropertyChanges(),this.get("parent").closeStyleEditor(),this.send("cancel"),this.set("draftStyleText",null)},saveAsPreset:function(){var presetName=prompt(__MSP_LAN.sc_001,__MSP_LAN.sc_002);if(""===presetName)presetName=__MSP_LAN.sc_002;else if(null===presetName)return;this.beginPropertyChanges();var data=this.get("draftStyle").toJSON();data.type="preset",data.name=presetName,delete data.id;var newPreset=MSPanel.PresetStyle.create(data);newPreset.save(),newPreset.set("className","msp-preset-"+newPreset.get("id")),newPreset.save(),this.endPropertyChanges()},cancel:function(){for(var key in this.get("draftStyle").toJSON())this.get("draftStyle").removeObserver(key,this,"onDraftChange");this.get("draftStyle").deleteRecord()},removeStyle:function(style){style.deleteRecord()}},styleObjectToString:function(styleModel){var styleValue,styleObj=styleModel,return_str="",custom="";styleObj.name=void 0,styleObj.className=void 0,styleObj.css=void 0,styleObj.type=void 0,styleObj.id=void 0,Ember.isEmpty(styleObj.custom)||(custom=styleObj.custom.replace(/(\r\n|\n|\r)/gm,"")),styleObj.custom=void 0;for(var key in styleObj)styleValue=styleObj[key],void 0!==styleValue&&(return_str+=this.camelToDash(key)+":"+styleObj[key]+("number"==typeof styleObj[key]?"px":"")+";");return return_str+custom},cssToObject:function(css){var output={},styles=css.split(";");css=css.replace(/(\r\n|\n|\r)/gm,"");for(var i=0,l=styles.length;i!==l;i++){var entry=styles[i].split(":");null!=entry[1]&&(output[entry[0]]=entry[1])}return output},camelToDash:function(str){return str.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase()}}),MSPanel.EffectsController=Ember.ArrayController.extend({type:"show",layer:null,ease:null,duration:5,origin:null,preview:null,draftEffect:null,draftTextEffect:null,addLayer:function(layer,type){this.set("layer",layer),this.set("type",type);var eff_data=this.get("layer."+type+"Effect").toJSON();delete eff_data.id;var draftEffect=MSPanel.Effect.create(eff_data);this.set("draftEffect",draftEffect),this.set("ease",this.get("layer."+type+"Ease"));for(var key in eff_data)this.get("draftEffect").addObserver(key,this,"onDraftChange");this.set("duration",layer.get(type+"Duration")),this.set("ease",layer.get(type+"Ease")),this.onDraftChange()},updateDraft:function(effect){this.beginPropertyChanges();var currentEffect=effect.toJSON();delete currentEffect.id;for(var key in currentEffect)"type"!==key&&this.set("draftEffect."+key,currentEffect[key]);this.endPropertyChanges()},onDraftChange:function(){this.set("draftEffectText",this.createTransform(this.get("draftEffect").toJSON())),this.set("origin",{x:this.get("draftEffect.originX"),y:this.get("draftEffect.originY"),z:this.get("draftEffect.originZ")})},onEaseUpdate:function(){this.set("layer."+this.get("type")+"Ease",this.get("ease"))}.observes("ease"),actions:{applyEffect:function(){this.beginPropertyChanges();var type=this.get("type"),draftEffectObj=this.get("draftEffect").toJSON();delete draftEffectObj.id,delete draftEffectObj.type,delete draftEffectObj.name;for(var key in draftEffectObj)this.set("layer."+type+"Effect."+key,draftEffectObj[key]);var origin=this.get("origin");this.set("layer."+type+"EffFunc",this.createEffectFunc(draftEffectObj)),this.set("layer."+type+"Ease",this.get("ease")),this.set("layer."+type+"Fade",this.get("draftEffect.fade")),this.set("layer."+type+"Duration",this.get("duration")),this.set("layer."+type+"Transform","perspective(2000px) "+this.get("draftEffectText")),this.set("layer."+type+"Origin",(void 0!==origin.x?origin.x:"50")+"% "+(void 0!==origin.y?origin.y:"50")+"% "+(void 0!==origin.z?origin.z:"0")+"px"),this.endPropertyChanges(),this.send("cancel"),this.get("parent").closeEffectEditor()},saveAsPreset:function(){var presetName=prompt(__MSP_LAN.ec_001,__MSP_LAN.ec_002);if(""===presetName)presetName=__MSP_LAN.ec_002;else if(null===presetName)return;this.beginPropertyChanges();var data=this.get("draftEffect").toJSON();data.type="preset",data.name=presetName,delete data.id;var newPreset=MSPanel.PresetEffect.create(data);newPreset.save(),this.endPropertyChanges()},cancel:function(){var preview=this.get("preview");Ember.isEmpty(preview)||preview.send("exitPlaying"),this.get("draftEffect").deleteRecord()},removeEffect:function(effect){effect.deleteRecord()}},createEffectFunc:function(effect){return"t("+(effect.fade?"true":"false")+","+(void 0!=effect.translateX?effect.translateX:"n")+","+(void 0!=effect.translateY?effect.translateY:"n")+","+(void 0!=effect.translateZ?effect.translateZ:"n")+","+(void 0!=effect.rotate?effect.rotate:"n")+","+(void 0!=effect.rotateX?effect.rotateX:"n")+","+(void 0!=effect.rotateY?effect.rotateY:"n")+","+(void 0!=effect.rotateZ?effect.rotateZ:"n")+","+(void 0!=effect.scaleX?effect.scaleX:"n")+","+(void 0!=effect.scaleY?effect.scaleY:"n")+","+(void 0!=effect.skewX?effect.skewX:"n")+","+(void 0!=effect.skewY?effect.skewY:"n")+","+(void 0!=effect.originX?effect.originX:"n")+","+(void 0!=effect.originY?effect.originY:"n")+","+(void 0!=effect.originZ?effect.originZ:"n")+")"},createTransform:function(effect){return(void 0!=effect.translateX?"translateX("+effect.translateX+"px) ":"")+(void 0!=effect.translateY?"translateY("+effect.translateY+"px) ":"")+(void 0!=effect.translateZ?"translateZ("+effect.translateZ+"px)":"")+(void 0!=effect.rotate?"rotate("+effect.rotate+"deg) ":"")+(void 0!=effect.rotateX?"rotateX("+effect.rotateX+"deg) ":"")+(void 0!=effect.rotateY?"rotateY("+effect.rotateY+"deg) ":"")+(void 0!=effect.rotateZ?"rotateZ("+effect.rotateZ+"deg) ":"")+(void 0!=effect.skewX?"skewX("+effect.skewX+"deg) ":"")+(void 0!=effect.skewY?"skewY("+effect.skewY+"deg) ":"")+(void 0!=effect.scaleX?"scaleX("+effect.scaleX+") ":"")+(void 0!=effect.scaleY?"scaleY("+effect.scaleY+") ":"")}}),MSPanel.ButtonsController=Ember.ArrayController.extend({needs:"application",layer:null,draftNormal:"",draftHover:"",draftActive:"",currentButton:null,addLayer:function(layer){this.set("layer",layer),this.onCurrentButtonChange()},onCurrentButtonChange:function(){if(0!==this.get("length")){var currentButton=this.get("currentButton");Ember.isEmpty(currentButton)&&(currentButton=this.get("firstObject"),this.set("currentButton",currentButton)),this.set("draftNormal",currentButton.get("normal")),this.set("draftHover",currentButton.get("hover")),this.set("draftActive",currentButton.get("active")),this.set("draftBtnStyle",currentButton.get("style")),this.set("draftBtnSize",currentButton.get("size"))}}.observes("currentButton").on("init"),actions:{applyStyle:function(){if(0===this.get("length")||confirm(__MSP_LAN.be_006||"By updating a button it will be changed in all of your sliders. Are you sure you want to update this button?")){if(0===this.get("length"))return void this.send("saveAsPreset");this.beginPropertyChanges(),this.set("currentButton.normal",this.get("draftNormal")),this.set("currentButton.hover",this.get("draftHover")),this.set("currentButton.active",this.get("draftActive")),this.set("currentButton.style",this.get("draftBtnStyle")),this.set("currentButton.size",this.get("draftBtnSize")),this.get("currentButton").save(),this.endPropertyChanges(),this.get("controllers.application").generateButtonStyles(),this.get("parent").closeButtonEditor(),this.send("cancel")}},saveAsPreset:function(){this.beginPropertyChanges();var newPreset=MSPanel.ButtonStyle.create({normal:this.get("draftNormal"),hover:this.get("draftHover"),active:this.get("draftActive"),size:this.get("draftBtnSize"),style:this.get("draftBtnStyle")});newPreset.save(),newPreset.set("className","msp-preset-btn-"+newPreset.get("id")),newPreset.save(),this.endPropertyChanges(),this.get("controllers.application").generateButtonStyles(),this.get("parent").closeButtonEditor(),this.send("cancel")},removeButton:function(button){button.deleteRecord(),this.get("controllers.application").generateButtonStyles()},cancel:function(){this.set("draftNormal",""),this.set("draftHover",""),this.set("draftActive",""),this.set("draftBtnSize",null),this.set("draftBtnStyle",null),this.set("currentButton",null)}}}),MSPanel.ControlsController=Ember.ArrayController.extend({needs:"application",controls:[{used:!1,label:__MSP_LAN.cc_001,value:"arrows"},{used:!1,label:__MSP_LAN.cc_002,value:"timebar"},{used:!1,label:__MSP_LAN.cc_003,value:"bullets"},{used:!1,label:__MSP_LAN.cc_004,value:"circletimer"},{used:!1,label:__MSP_LAN.cc_005,value:"scrollbar"},{used:!1,label:__MSP_LAN.cc_006,value:"slideinfo"},{used:!1,label:__MSP_LAN.cc_007,value:"thumblist"}],selectedControl:null,availableControls:[],noMore:!1,currentControl:null,setup:function(){var that=this;this.forEach(function(control){that.findControlObj(control.get("name")).used=!0}),this.set("availableControls",this.findAvailableControls())},onInsertThumb:function(){var ctr=this.get("currentControl");Ember.isEmpty(ctr)||("tabs"===this.get("currentControl.type")?this.set("isTab",!0):this.set("isTab",!1))}.observes("currentControl.type").on("didInsertElement"),actions:{addControl:function(){var control,controlName=this.get("selectedControl"),controlObj=this.findControlObj(controlName);control=MSPanel.Control.create(this.getDefaultValues(controlName)),control.set("label",controlObj.label),controlObj.used=!0,this.set("availableControls",this.findAvailableControls()),control.save(),this.set("currentControl",control)},removeControl:function(control){this.findControlObj(control.get("name")).used=!1,this.set("availableControls",this.findAvailableControls()),control.deleteRecord(),this.set("currentControl",this.get("firstObject")),this.send("showControlOptions")},showControlOptions:function(){var currentControl=this.get("currentControl");Ember.isEmpty(currentControl)?this.set("controlOptions","empty-template"):this.set("controlOptions",currentControl.get("name")+"-options")}},findControlObj:function(control){for(var controls=this.get("controls"),i=0,l=controls.length;i!==l;i++)if(controls[i].value===control)return controls[i];return null},findAvailableControls:function(){for(var avc=[],controls=this.get("controls"),i=0,l=controls.length;i!==l;i++)controls[i].used||avc.push(controls[i]);return this.set("noMore",0===avc.length),this.set("selectedControl",avc[0]?avc[0].value:null),avc},getDefaultValues:function(control){var values={name:control};switch(values.inset=!("slideinfo"===control||"thumblist"===control),control){case"timebar":values.align="bottom",values.color="#FFFFFF",values.autoHide=!1,values.width=4;break;case"bullets":values.align="bottom",values.dir="h",values.margin=10,values.space=6;break;case"circletimer":values.color="#A2A2A2",values.stroke=10,values.radius=4,values.autoHide=!1;break;case"scrollbar":values.align="top",values.dir="h",values.color="#3D3D3D",values.margin=10,values.autoHide=!1,values.width=4;break;case"slideinfo":values.align="bottom",values.margin=10,values.autoHide=!1;break;case"thumblist":values.align="bottom",values.space=5,values.width=100,values.height=80,values.margin=10,values.fillMode="fill",values.autoHide=!1}return values}}),MSPanel.CallbacksController=Ember.ArrayController.extend({callbacks:[{used:!1,label:__MSP_LAN.cb_011,value:"INIT"},{used:!1,label:__MSP_LAN.cb_001,value:"CHANGE_START"},{used:!1,label:__MSP_LAN.cb_002,value:"CHANGE_END"},{used:!1,label:__MSP_LAN.cb_003,value:"WAITING"},{used:!1,label:__MSP_LAN.cb_004,value:"RESIZE"},{used:!1,label:__MSP_LAN.cb_005,value:"VIDEO_PLAY"},{used:!1,label:__MSP_LAN.cb_006,value:"VIDEO_CLOSE"},{used:!1,label:__MSP_LAN.cb_007,value:"SWIPE_START"},{used:!1,label:__MSP_LAN.cb_008,value:"SWIPE_MOVE"},{used:!1,label:__MSP_LAN.cb_009,value:"SWIPE_END"}],availableCallbacks:[],noMore:!1,selectedCallback:null,setup:function(){var that=this;this.forEach(function(callback){that.findCallbackObj(callback.get("name")).used=!0}),this.set("availableCallbacks",this.findAvailableCallbacks())},actions:{addCallback:function(){var callback,callbackName=this.get("selectedCallback"),callbackObj=this.findCallbackObj(callbackName);callback=MSPanel.Callback.create({name:callbackObj.value,label:callbackObj.label}),callbackObj.used=!0,this.set("availableCallbacks",this.findAvailableCallbacks()),callback.save()},removeCallback:function(callback){confirm(__MSP_LAN.cb_010.jfmt(callback.get("label")))&&(this.findCallbackObj(callback.get("name")).used=!1,this.set("availableCallbacks",this.findAvailableCallbacks()),callback.deleteRecord())}},findCallbackObj:function(callback){for(var callbacks=this.get("callbacks"),i=0,l=callbacks.length;i!==l;i++)if(callbacks[i].value===callback)return callbacks[i];return null},findAvailableCallbacks:function(){for(var avc=[],callbacks=this.get("callbacks"),i=0,l=callbacks.length;i!==l;i++)callbacks[i].used||avc.push(callbacks[i]);return this.set("noMore",0===avc.length),this.set("selectedCallback",avc[0]?avc[0].value:null),avc}}),function($){function registerDynamicTags(){registered||(registered=!0,MSPanel.dynamicTags&&MSPanel.dynamicTags.push({name:__MSP_LAN.flk_001||"Photo title",tag:"{{title}}",generator:function(){return MSPanel.flickrData.title||"{{title}}"}},{name:__MSP_LAN.flk_002||"Photo owner name",tag:"{{owner-name}}",generator:function(){return MSPanel.flickrData.ownername||"{{owner-name}}"}},{name:__MSP_LAN.flk_003||"Date taken",tag:"{{date-taken}}",generator:function(){return MSPanel.flickrData.datetaken||"{{date-taken}}"}},{name:__MSP_LAN.flk_004||"Photo description",tag:"{{description}}",generator:function(){return MSPanel.flickrData.description._content||"{{description}}"}}))}var getPhotosetURL=function(key,id,count){return"https://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos&api_key="+key+"&photoset_id="+id+"&per_page="+count+"&extras=url_o,description,date_taken,owner_name,views&format=json&jsoncallback=?"},getUserPublicURL=function(key,id,count){return"https://api.flickr.com/services/rest/?&method=flickr.people.getPublicPhotos&api_key="+key+"&user_id="+id+"&per_page="+count+"&extras=url_o,description,date_taken,owner_name,views&format=json&jsoncallback=?"},getImageSource=function(fid,server,id,secret,size,data){return"o"===size&&data?data.url_o:(size="-"===size?"":"_"+size,"https://farm"+fid+".staticflickr.com/"+server+"/"+id+"_"+secret+size+".jpg")},registered=!1;MSPanel.flickrData={},MSPanel.FlickrController=Ember.ObjectController.extend({needs:["slides"],isPhotoset:null,firstSlide:null,photoData:null,needToReload:!1,ajaxRequest:null,setup:function(){registerDynamicTags(),Ember.isEmpty(this.get("imgCount"))&&this.set("imgCount",10),Ember.isEmpty(this.get("setType"))&&this.set("setType","photos"),Ember.isEmpty(this.get("imgSize"))&&this.set("imgSize","c"),Ember.isEmpty(this.get("thumbSize"))&&this.set("thumbSize","q"),this.set("firstSlide",MSPanel.Slide.find(1)),this.loadData()},loadData:function(){this.set("needToReload",!1),this.set("controllers.slides.layersController.noticeMsg","Loading data from Flickr...");var ajaxRequest=this.get("ajaxRequest");Ember.isEmpty(ajaxRequest)||ajaxRequest.abort();var request,that=this;request="photoset"===this.get("setType")?$.getJSON(getPhotosetURL(this.get("apiKey"),this.get("setId"),1),function(data){that._photoData(data)}):$.getJSON(getUserPublicURL(this.get("apiKey"),this.get("setId"),1),function(data){that._photoData(data)}),this.set("ajaxRequest",request)},checkForReload:function(){this.set("needToReload",!0)}.observes("setType","apiKey","id"),onActivate:function(){},onDeactivate:function(){this.get("needToReload")&&this.loadData()},_photoData:function(data){return"fail"===data.stat?(this.set("firstSlide.bg",void 0),MSPanel.flickrData={},this.get("controllers.slides.layersController").updateDynamicContent(),void this.set("controllers.slides.layersController.noticeMsg",'<span style="color:#FF4700;">Flickr API error #'+data.code+": "+data.message+". Please check Flicker settings.</span>")):(data=data[this.get("setType")].photo[0],MSPanel.flickrData=data,this.set("photoData",data),this._updateBGImage(),this.set("controllers.slides.layersController.noticeMsg",void 0),void this.get("controllers.slides.layersController").updateDynamicContent())},_updateBGImage:function(){var data=this.get("photoData");Ember.isEmpty(data)||this.set("firstSlide.bg",getImageSource(data.farm,data.server,data.id,data.secret,this.get("imgSize"),data))}.observes("imgSize"),onTypeChange:function(){this.set("isPhotoset","photoset"===this.get("setType"))}.observes("setType").on("init")})}(jQuery),function($){function registerDynamicTags(){registered||(registered=!0,MSPanel.dynamicTags&&MSPanel.dynamicTags.push({name:__MSP_LAN.fb_001||"Photo name",tag:"{{name}}",generator:function(){return MSPanel.facebookData.name||"{{name}}"}},{name:__MSP_LAN.fb_002||"Photo owner name",tag:"{{owner-name}}",generator:function(){return MSPanel.facebookData.from.name||"{{owner-name}}"}},{name:__MSP_LAN.fb_003||"Phoot link",tag:"{{link}}",generator:function(){return MSPanel.facebookData.link||"{{link}}"}}))}var getPhotostreamURL=function(user,count,token){return"https://graph.facebook.com/"+user+"/photos/uploaded/?fields=source,name,link,images,from&limit="+count+"&access_token="+token},getAlbumURL=function(albumId,count,token){return"https://graph.facebook.com/"+albumId+"/photos?fields=source,name,link,images,from&limit="+count+"&access_token="+token},getImageSource=function(images,size){if("orginal"===size)return images[0].source;for(var i=0,l=images.length;i!==l;i++)if(-1!==images[i].source.indexOf(size+"x"+size))return images[i].source;return images[l-3].source},registered=!1;MSPanel.facebookData={},MSPanel.FacebookController=Ember.ObjectController.extend({needs:["slides"],isPhotostream:null,firstSlide:null,photoData:null,needToReload:!1,ajaxRequest:null,setup:function(){registerDynamicTags(),Ember.isEmpty(this.get("imgCount"))&&this.set("imgCount",10),Ember.isEmpty(this.get("setType"))&&this.set("setType","album"),Ember.isEmpty(this.get("imgSize"))&&this.set("imgSize","orginal"),Ember.isEmpty(this.get("thumbSize"))&&this.set("thumbSize","320"),this.set("firstSlide",MSPanel.Slide.find(1)),this.loadData()},loadData:function(){this.set("needToReload",!1),this.set("controllers.slides.layersController.noticeMsg","Loading data from Facebook...");var ajaxRequest=this.get("ajaxRequest");Ember.isEmpty(ajaxRequest)||ajaxRequest.abort();var request,that=this;request="album"===this.get("setType")?$.getJSON(getAlbumURL(this.get("setId"),1,this.get("fbtoken")),function(data){that._photoData(data)}):$.getJSON(getPhotostreamURL(this.get("setId"),1,this.get("fbtoken")),function(data){that._photoData(data)}),this.set("ajaxRequest",request)},checkForReload:function(){this.set("needToReload",!0)}.observes("setType","apiKey","id"),onActivate:function(){},onDeactivate:function(){this.get("needToReload")&&this.loadData()},_photoData:function(content){return content.error?(this.set("firstSlide.bg",void 0),MSPanel.facebookData={},this.get("controllers.slides.layersController").updateDynamicContent(),void this.set("controllers.slides.layersController.noticeMsg",'<span style="color:#FF4700;">Facebook API ERROR#'+content.error.code+"("+content.error.type+"): "+content.error.message+". Please check Facebook settings.</span>")):(content=content.data[0],MSPanel.facebookData=content,this.set("photoData",content),this._updateBGImage(),this.set("controllers.slides.layersController.noticeMsg",void 0),void this.get("controllers.slides.layersController").updateDynamicContent())},_updateBGImage:function(){var data=this.get("photoData");Ember.isEmpty(data)||this.set("firstSlide.bg",getImageSource(data.images,this.get("imgSize")))}.observes("imgSize"),onTypeChange:function(){this.set("isPhotostream","photostream"===this.get("setType"))}.observes("setType").on("init")})}(jQuery),function($){function registerTag(tag){return{name:tag.label,tag:"{{"+tag.name+"}}",tagName:tag.name,generator:function(tagObj){return MSPanel.wpPostsData[tagObj.tagName]||tagObj.tag}}}MSPanel.wpPostData={},MSPanel.PostController=Ember.ObjectController.extend({needs:["slides"],wpData:null,firstSlide:null,needToReload:!1,ajaxRequest:null,setup:function(){Ember.isEmpty(this.get("postType"))&&this.set("postType","post"),this.registerDynamicTags(),Ember.isEmpty(this.get("postCount"))&&this.set("postCount",10),Ember.isEmpty(this.get("postOrder"))&&this.set("postOrder","date"),Ember.isEmpty(this.get("postOrderDir"))&&this.set("postOrderDir","DESC"),Ember.isEmpty(this.get("postImageType"))&&this.set("postImageType","auto");var wpData=__MSP_POST.types_taxs_terms;this.set("wpData",wpData),this.set("firstSlide",MSPanel.Slide.find(1)),this.loadData(),this.onPostTypeChanged(!0)},loadData:function(){this.set("needToReload",!1);var ajaxRequest=this.get("ajaxRequest");Ember.isEmpty(ajaxRequest)||ajaxRequest.abort();var request,that=this,data={};if(data.post_type=this.get("postType"),data.orderby=this.get("postOrder"),data.order=this.get("postOrderDir"),data.limit=this.get("postCount"),data.post__not_in=this.get("postExcludeIds"),data.post__in=this.get("postIncludeIds"),data.exclude_post_no_image=this.get("postExcludeNoImg"),data.slideImage=this.get("postImageType"),data.offset=this.get("postOffset"),data.excerpt_length=this.get("postExcerptLen"),data.action="post_slider_preview",data.nonce=jQuery("#msp-main-wrapper").data("nonce"),!Ember.isEmpty(this.get("postCats"))){var cats=this.get("postCats");""===cats[0]&&cats.splice(0,1),0!==cats.length&&(data.cats=cats.join(","))}if(!Ember.isEmpty(this.get("postTags"))){var tags=this.get("postTags");""===tags[0]&&tags.splice(0,1),0!==tags.length&&(data.tags=tags.join(","))}this.set("previewResults",'<div class="msp-posts-loading">Loading data...</div>'),this.set("controllers.slides.layersController.noticeMsg","Loading posts data...");var request=$.post(__MS.ajax_url,data,function(serverData){serverData.success?(that.updatePreview(serverData),that.updateWpPostData(serverData)):(that.set("previewResults","Error: "+serverData.message),that.set("controllers.slides.layersController.noticeMsg","Error: "+serverData.message))},"json");this.set("ajaxRequest",request)},onPostTypeChanged:function(keepTaxo){var wpData=this.get("wpData"),postType=this.get("postType");if(!Ember.isEmpty(wpData)){var cats=$.map(wpData.cats[postType],function(index){return{value:index.term_taxonomy_id,label:index.name}}),tags=$.map(wpData.tags[postType],function(index){return{value:index.term_taxonomy_id,label:index.name}});this.set("postCatsList",cats),this.set("postTagsList",tags),keepTaxo!==!0&&(this.set("postTags",void 0),this.set("postCats",void 0))}}.observes("postType"),onPostImageTypeChanged:function(){this.set("useCustomBg","custom"===this.get("postImageType"))}.observes("postImageType"),updatePreview:function(serverData){serverData.preview_results?this.set("previewResults",serverData.preview_results):(this.set("previewResults",'<div style="margin:20px">Nothing found. Please try another filter. </div>'),this.set("controllers.slides.layersController.noticeMsg","Nothing found. Please try another filter in posts settings."))},updateWpPostData:function(serverData){var data=serverData.template_tags;return data?("custom"===this.get("postImageType")?this.set("firstSlide.bg",this.get("postSlideBg")):data["image-url"].length>0?this.set("firstSlide.bg",data["image-url"]):this.set("firstSlide.bg",void 0),MSPanel.wpPostsData=data,this.set("controllers.slides.layersController.noticeMsg",void 0),this.get("controllers.slides.layersController").updateDynamicContent(),void this.set("needToReload",!1)):(MSPanel.wpPostsData={},this.set("firstSlide.bg",void 0),this.set("controllers.slides.layersController.noticeMsg","Nothing found. Please try another filter in posts settings."),this.get("controllers.slides.layersController").updateDynamicContent(),void this.set("needToReload",!1))},checkForReload:function(){this.set("needToReload",!0);var that=this;clearTimeout(this.get("reqTo")),this.set("reqTo",setTimeout(function(){that.loadData()},200))}.observes("postType","postCats","postTags","postCount","postImageType","postOrder","postOrderDir","postExcludeIds","postIncludeIds","postOffset","postExcerptLen"),onActivate:function(){},onDeactivate:function(){this.get("needToReload")&&(clearTimeout(this.get("reqTo")),this.loadData(),this.registerDynamicTags())},registerDynamicTags:function(){if(MSPanel.dynamicTags){MSPanel.dynamicTags=[],MSPanel.dynamicTags.push.apply(MSPanel.dynamicTags,$.map(__MSP_POST.content_tags.general,registerTag));var postTags=__MSP_POST.content_tags[this.get("postType")];postTags&&postTags.length>0&&MSPanel.dynamicTags.push.apply(MSPanel.dynamicTags,$.map(postTags,registerTag))}}})}(jQuery),function($){function registerTag(tag){return{name:tag.label,tag:"{{"+tag.name+"}}",tagName:tag.name,generator:function(tagObj){return MSPanel.wpPostsData[tagObj.tagName]||tagObj.tag}}}MSPanel.wpPostData={},MSPanel.WcproductController=Ember.ObjectController.extend({needs:["slides"],wpData:null,firstSlide:null,needToReload:!1,ajaxRequest:null,setup:function(){Ember.isEmpty(this.get("postType"))&&this.set("postType","product"),this.registerDynamicTags(),Ember.isEmpty(this.get("postCount"))&&this.set("postCount",10),Ember.isEmpty(this.get("postOrder"))&&this.set("postOrder","date"),Ember.isEmpty(this.get("postOrderDir"))&&this.set("postOrderDir","DESC"),Ember.isEmpty(this.get("postImageType"))&&this.set("postImageType","auto");var wpData=__MSP_POST.types_taxs_terms;this.set("wpData",wpData),this.set("firstSlide",MSPanel.Slide.find(1)),this.loadData(),this.onPostTypeChanged(!0)},loadData:function(){this.set("needToReload",!1);var ajaxRequest=this.get("ajaxRequest");Ember.isEmpty(ajaxRequest)||ajaxRequest.abort();var request,that=this,data={};if(data.post_type=this.get("postType"),data.orderby=this.get("postOrder"),data.order=this.get("postOrderDir"),data.limit=this.get("postCount"),data.post__not_in=this.get("postExcludeIds"),data.slideImage=this.get("postImageType"),data.offset=this.get("postOffset"),data.excerpt_length=this.get("postExcerptLen"),data.only_instock=this.get("wcOnlyInstock"),data.only_featured=this.get("wcOnlyFeatured"),data.only_onsale=this.get("wcOnlyOnsale"),data.action="wc_slider_preview",data.nonce=jQuery("#msp-main-wrapper").data("nonce"),!Ember.isEmpty(this.get("postCats"))){var cats=this.get("postCats");""===cats[0]&&cats.splice(0,1),0!==cats.length&&(data.cats=cats.join(","))}if(!Ember.isEmpty(this.get("postTags"))){var tags=this.get("postTags");""===tags[0]&&tags.splice(0,1),0!==tags.length&&(data.tags=tags.join(","))}this.set("previewResults",'<div class="msp-posts-loading">Loading data...</div>'),this.set("controllers.slides.layersController.noticeMsg","Loading products data...");var request=$.post(__MS.ajax_url,data,function(serverData){serverData.success?(that.updatePreview(serverData),that.updateWpPostData(serverData)):(that.set("previewResults","Error: "+serverData.message),that.set("controllers.slides.layersController.noticeMsg","Error: "+serverData.message))},"json");this.set("ajaxRequest",request)},onPostTypeChanged:function(keepTaxo){var wpData=this.get("wpData"),postType=this.get("postType");if(!Ember.isEmpty(wpData)){var cats=$.map(wpData.cats[postType],function(index){return{value:index.term_taxonomy_id,label:index.name}}),tags=$.map(wpData.tags[postType],function(index){return{value:index.term_taxonomy_id,label:index.name}});this.set("postCatsList",cats),this.set("postTagsList",tags),keepTaxo!==!0&&(this.set("postTags",void 0),this.set("postCats",void 0))}}.observes("postType"),onPostImageTypeChanged:function(){this.set("useCustomBg","custom"===this.get("postImageType"))}.observes("postImageType"),updatePreview:function(serverData){serverData.preview_results?this.set("previewResults",serverData.preview_results):(this.set("previewResults",'<div style="margin:20px">Nothing found. Please try another filter. </div>'),this.set("controllers.slides.layersController.noticeMsg","Nothing found. Please try another filter in product slider settings."))},updateWpPostData:function(serverData){var data=serverData.template_tags;return data?("custom"===this.get("postImageType")?this.set("firstSlide.bg",this.get("postSlideBg")):data["image-url"].length>0?this.set("firstSlide.bg",data["image-url"]):this.set("firstSlide.bg",void 0),MSPanel.wpPostsData=data,this.set("controllers.slides.layersController.noticeMsg",void 0),this.get("controllers.slides.layersController").updateDynamicContent(),void this.set("needToReload",!1)):(MSPanel.wpPostsData={},this.set("firstSlide.bg",void 0),this.set("controllers.slides.layersController.noticeMsg","Nothing found. Please try another filter in product slider settings."),this.get("controllers.slides.layersController").updateDynamicContent(),void this.set("needToReload",!1))},checkForReload:function(){this.set("needToReload",!0);var that=this;clearTimeout(this.get("reqTo")),this.set("reqTo",setTimeout(function(){that.loadData()
},200))}.observes("postType","postCats","postTags","postCount","postImageType","postOrder","postOrderDir","postExcludeIds","postOffset","postExcerptLen","wcOnlyOnsale","wcOnlyFeatured","wcOnlyInstock"),onActivate:function(){},onDeactivate:function(){this.get("needToReload")&&(clearTimeout(this.get("reqTo")),this.loadData(),this.registerDynamicTags())},registerDynamicTags:function(){if(MSPanel.dynamicTags){MSPanel.dynamicTags=[],MSPanel.dynamicTags.push.apply(MSPanel.dynamicTags,$.map(__MSP_POST.content_tags.general,registerTag));var postTags=__MSP_POST.content_tags[this.get("postType")];postTags&&postTags.length>0&&MSPanel.dynamicTags.push.apply(MSPanel.dynamicTags,$.map(postTags,registerTag))}}})}(jQuery);