!function(e){"use strict";function n(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}function t(e,t){this.el=e,this.options=n({},this.options),n(this.options,t),this.menus=jQuery(this.el).find(".menu-container").toArray(),this.current=0,this._init()}var a=Modernizr.cssanimations,i={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"}[Modernizr.prefixed("animation")],s=function(e,n){var t=function(e){if(a){if(e.target!=this)return;this.removeEventListener(i,t)}n&&"function"==typeof n&&n.call()};a?e.addEventListener(i,t):t()};t.prototype.options={initialDelay:200,itemsDelayInterval:60,direction:"r2l"},t.prototype._init=function(){this.menusArr=[];var e=this,n=jQuery(".be-sidemenu").attr("data-menu-alignment");if(jQuery("body").hasClass("overlay-left-align-menu")&&jQuery(".special-header-bottom-text").length>0){var t=jQuery(".special-header-bottom-text");t[0].clientHeight==t[0].scrollHeight&&jQuery(t).css("align-self",n)}this.menus.forEach(function(t,a){var i={menuEl:t,menuItems:[].slice.call(t.querySelectorAll(".menu-item"))},s=t.clientHeight,o=t.scrollHeight;e.menusArr.push(i),a===e.current&&classie.add(t,"menu__level--current"),s==o&&jQuery(t).css("justify-content",n)}),this._initEvents()},t.prototype._initEvents=function(){for(var n=this,t=0,a=this.menusArr.length;t<a;++t)this.menusArr[t].menuItems.forEach(function(e,t){0!=jQuery(e).find("span.mobile-sub-menu-controller").length&&e.querySelector(".mobile-sub-menu-controller").addEventListener("click",function(e){var t=jQuery(e.target).closest(".menu-item").children("ul"),a=t.find("li").toArray().filter(function(e){return e.parentElement==t[0]||("none"!=jQuery(e).parent().css("display")||void 0)});"none"==t.css("display")?n.animateSubMenu(a,"openMenu"):n.animateSubMenu(a,"closeMenu")})});jQuery(document).on("click",".hamburger-nav-controller-wrap",function(e){jQuery("body").hasClass("perspective-left")||jQuery("body").hasClass("perspective-right")?jQuery("body").hasClass("perspectiveview-open")?jQuery("body").hasClass("perspectiveview-open")&&n.animateMenu("closeMenu"):n.animateMenu("openMenu"):jQuery("body").hasClass("side-menu-opened")?n.animateMenu("openMenu"):n.animateMenu("closeMenu")}),jQuery(document).on("click","#be-left-strip",function(e){jQuery("body").hasClass("perspective-right")?jQuery("body").hasClass("perspectiveview-open")?jQuery("body").hasClass("perspectiveview-open")&&n.animateMenu("closeMenu"):n.animateMenu("openMenu"):jQuery("body").hasClass("side-menu-opened")?n.animateMenu("openMenu"):n.animateMenu("closeMenu")}),jQuery(document).on("click","#main",function(){(jQuery("body").hasClass("side-menu-opened")||jQuery("body").hasClass("perspectiveview"))&&n.animateMenu("closeMenu")}),jQuery(document).on("click",".be-overlay-menu-close",function(){jQuery("body").hasClass("side-menu-opened")?n.animateMenu("openMenu"):n.animateMenu("closeMenu")}),jQuery(e).on("resize",function(){var e=jQuery(".be-sidemenu").attr("data-menu-alignment"),t=jQuery(".special-header-bottom-text");setTimeout(function(){if(jQuery("body").hasClass("overlay-left-align-menu")&&t.length>0){jQuery(t).css("align-self","auto");t[0].clientHeight==t[0].scrollHeight?jQuery(t).css("align-self",e):jQuery(t).css("align-self","auto")}n.menus.forEach(function(n,t){n.clientHeight==n.scrollHeight?jQuery(n).css("justify-content",e):jQuery(n).css("justify-content","flex-start")})},500)}),document.addEventListener("keyup",function(e){if(jQuery("body").hasClass("side-menu-opened")||jQuery("body").hasClass("perspectiveview")){27===(e.keyCode||e.which)&&n.animateMenu("closeMenu")}})},t.prototype.animateSubMenu=function(e,n){var t=this,a=e[0].parentElement,i=e.length-1;e.forEach(function(e,o){if(e.style.WebkitAnimationDelay=e.style.animationDelay=parseInt(o*t.options.itemsDelayInterval)+"ms",o==i&&(s(e,function(){if("closeMenu"==n)switch(t.options.direction){case"r2l":classie.remove(a,"animate-outToRight");break;case"l2r":classie.remove(a,"animate-outToLeft");break;case"t2b":classie.remove(a,"animate-outToTop");break;case"b2t":classie.remove(a,"animate-outToBottom")}else if("openMenu"==n)switch(t.options.direction){case"r2l":classie.remove(a,"animate-inFromRight");break;case"l2r":classie.remove(a,"animate-inFromLeft");break;case"t2b":classie.remove(a,"animate-inFromTop");break;case"b2t":classie.remove(a,"animate-inFromBottom")}}),setTimeout(function(){t.menus.forEach(function(e,n){e.clientHeight==e.scrollHeight?jQuery(e).css("justify-content",jQuery(".be-sidemenu").attr("data-menu-alignment")):jQuery(e).css("justify-content","flex-start")})},450)),"closeMenu"==n)switch(t.options.direction){case"r2l":classie.add(a,"animate-outToRight");break;case"l2r":classie.add(a,"animate-outToLeft");break;case"t2b":classie.add(a,"animate-outToTop");break;case"b2t":classie.add(a,"animate-outToBottom")}else if("openMenu"==n)switch(t.options.direction){case"r2l":classie.add(a,"animate-inFromRight");break;case"l2r":classie.add(a,"animate-inFromLeft");break;case"t2b":classie.add(a,"animate-inFromTop");break;case"b2t":classie.add(a,"animate-inFromBottom")}})},t.prototype.animateMenu=function(e){var n=this,t=void 0!==n.menusArr[n.current]?jQuery(n.menusArr[n.current].menuItems).filter(":visible").toArray():[],a=t.length-1,i=jQuery(".special-header-bottom-text"),o=jQuery(".special-header-logo");t.forEach(function(t,i){if(t.style.WebkitAnimationDelay=t.style.animationDelay=parseInt(i*n.options.itemsDelayInterval+n.options.initialDelay)+"ms",i==a&&s(t,function(){if("closeMenu"==e)classie.remove(n.menusArr[n.current].menuEl,"animate-closemenu");else if("openMenu"==e)switch(n.options.direction){case"r2l":classie.remove(n.menusArr[n.current].menuEl,"animate-inFromRight");break;case"l2r":classie.remove(n.menusArr[n.current].menuEl,"animate-inFromLeft");break;case"t2b":classie.remove(n.menusArr[n.current].menuEl,"animate-inFromTop");break;case"b2t":classie.remove(n.menusArr[n.current].menuEl,"animate-inFromBottom")}}),"closeMenu"==e)t.style.WebkitAnimationDelay=t.style.animationDelay=parseInt(0)+"ms",classie.add(n.menusArr[n.current].menuEl,"animate-closemenu");else if("openMenu"==e)switch(n.options.direction){case"r2l":classie.add(n.menusArr[n.current].menuEl,"animate-inFromRight");break;case"l2r":classie.add(n.menusArr[n.current].menuEl,"animate-inFromLeft");break;case"t2b":classie.add(n.menusArr[n.current].menuEl,"animate-inFromTop");break;case"b2t":classie.add(n.menusArr[n.current].menuEl,"animate-inFromBottom")}});var r=function(t){if("closeMenu"==e)t.removeClass("animate-closemenu");else if("openMenu"==e)switch(n.options.direction){case"r2l":t.removeClass("animate-inFromRight");break;case"l2r":t.removeClass("animate-inFromLeft");break;case"t2b":t.removeClass("animate-inFromTop");break;case"b2t":t.removeClass("animate-inFromBottom")}};if(0!=i.length&&s(i[0],r.bind(null,i)),0!=o.length&&s(o[0],r.bind(null,o)),"closeMenu"==e)i.css("animation-delay",parseInt(0)+"ms"),o.css("animation-delay",parseInt(0)+"ms"),i.addClass("animate-closemenu"),o.addClass("animate-closemenu");else if("openMenu"==e)switch(i.css("animation-delay",parseInt(n.options.initialDelay)+"ms"),o.css("animation-delay",parseInt(n.options.initialDelay)+"ms"),n.options.direction){case"r2l":i.addClass("animate-inFromRight"),o.addClass("animate-inFromRight");break;case"l2r":i.addClass("animate-inFromLeft"),o.addClass("animate-inFromLeft");break;case"t2b":i.addClass("animate-inFromTop"),o.addClass("animate-inFromTop");break;case"b2t":i.addClass("animate-inFromBottom"),o.addClass("animate-inFromBottom")}},e.OldMenu=t}(window);