!function(l){"use strict";var u;l.fn.tatsuParallax=function(i){u=l(this),i=l.extend({speed:.4},i);var d=window.innerHeight,a=function(){var t,e,n,r,s=l(window).scrollTop();u.each(function(){if((t=l(this)).hasClass("tatsu-parallaxed")){if(r=t.data("speed")||i.speed,e=t.offset().top,n=t.outerHeight(!0),e+n<s||s+d<e)return;var a=0<e-d?e-d:0;t.find(".tatsu-parallax-element-wrap").css({transform:"translate3d( 0,"+Math.round((s-a)*-r)+"px, 0)"})}})},t=function(a,o){if(a)var t=l(".tatsu-parallaxed").find(".tatsu-parallax-element-wrap");else t=u.find(".tatsu-parallax-element-wrap");t.each(function(){var a,t,e=l(this),n=e.parent(),r=n.outerHeight(),s=e.parent().offset().top,i=document.body.scrollHeight;(n.data("speed")&&!o?t=n.data("speed"):(t=o,n.data({speed:o})),s+r+d<i)?(a=Math.round((r+d)*t)+r,s<d&&(a=r+Math.round((r+s)*t))):a=e.parent().innerHeight()+Math.round((i-s)*t);e.height(a)})};return l(window).on("resize",function(){d=window.innerHeight,t(!0),a()}),l(window).on("scroll",function(){requestAnimationFrame(function(){a()})}),u.each(function(){l(this).hasClass("tatsu-parallaxed")||l(this).addClass("tatsu-parallaxed")}),t(!1,i.speed),this}}(jQuery);