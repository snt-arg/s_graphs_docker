!function(d){"use strict";redux.field_objects=redux.field_objects||{},redux.field_objects.image_select=redux.field_objects.image_select||{},d(document).ready(function(){}),redux.field_objects.image_select.init=function(e){e||(e=d(document).find(".redux-group-tab:visible").find(".redux-container-image_select:visible")),d(e).each(function(){var r=d(this),e=r;r.hasClass("redux-field-container")||(e=r.parents(".redux-field-container:first")),e.is(":hidden")||e.hasClass("redux-field-init")&&(e.removeClass("redux-field-init"),r.find(".redux-image-select label img, .redux-image-select label .tiles").click(function(e){var t=d(this).closest("label").attr("for");if(d(this).parents("fieldset:first").find(".redux-image-select-selected").removeClass("redux-image-select-selected").find("input[type='radio']").attr("checked",!1),d(this).closest("label").find('input[type="radio"]').prop("checked"),d(this).closest("label").hasClass("redux-image-select-preset-"+t)){e.preventDefault();var i=d(this).closest("label").find("input"),s=i.data("presets"),l=i.data("merge");if(null!=l&&("string"===d.type(l)&&(l=l.split("|")),d.each(s,function(e,t){!0!==l&&-1==d.inArray(e,l)||"object"!==d.type(redux.options[e])||(s[e]=d.extend(redux.options[e],s[e]))})),null!=i)confirm(redux.args.preset_confirm)&&(r.find('label[for="'+t+'"]').addClass("redux-image-select-selected").find("input[type='radio']").attr("checked",!0),window.onbeforeunload=null,0===d("#import-code-value").length?d(this).append('<textarea id="import-code-value" style="display:none;" name="'+redux.args.opt_name+'[import_code]">'+JSON.stringify(s)+"</textarea>"):d("#import-code-value").val(JSON.stringify(s)),0!==d("#publishing-action #publish").length?d("#publish").click():d("#redux-import").click());return!1}r.find('label[for="'+t+'"]').addClass("redux-image-select-selected").find("input[type='radio']").attr("checked",!0).trigger("change"),redux_change(d(this).closest("label").find('input[type="radio"]'))}),r.find(".tiles").qtip({content:{text:function(e,t){return"<img src='"+d(this).attr("rel")+"' style='max-width:150px;' alt='' />"}},style:"qtip-tipsy",position:{my:"top center",at:"bottom center"}}))})}}(jQuery);