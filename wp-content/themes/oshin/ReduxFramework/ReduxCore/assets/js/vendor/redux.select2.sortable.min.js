!function(o){o.fn.extend({select2SortableOrder:function(){var e=this.filter("[multiple]");return e.each(function(){var t=o(this);if("object"!=typeof t.data("select2"))return!1;var e,s=t.siblings(".select2-container"),i=[];t.find("optgroup").each(function(e,t){i.push(t)}),t.find("option").each(function(e,t){void 0===o(this).parent("optgroup").prop("label")&&(""===this.value||this.selected||i.push(this))}),(e=o(s.find('.select2-choices li[class!="select2-search-field"]').map(function(){if(this&&null!=o(this).data("select2Data")){var e=o(this).data("select2Data").id;return t.find('option[value="'+e+'"]')[0]}}))).push.apply(e,i),t.children().remove(),t.append(e)}),e},select2Sortable:function(){var e=Array.prototype.slice.call(arguments,0);if($this=this.filter("[multiple]"),validMethods=["destroy"],0===e.length||"object"==typeof e[0]){var t=o.extend({bindOrder:"formSubmit",sortableOptions:{placeholder:"ui-state-highlight",items:"li:not(.select2-search-field)",tolerance:"pointer"}},e[0]);"object"!=typeof $this.data("select2")&&$this.select2(),$this.each(function(){var s=o(this),e=s.siblings(".select2-container").find(".select2-choices");switch(e.sortable(t.sortableOptions),t.bindOrder){case"sortableStop":e.on("sortstop.select2sortable",function(e,t){s.select2SortableOrder()}),s.on("change",function(e){o(this).select2SortableOrder()});break;default:s.closest("form").unbind("submit.select2sortable").on("submit.select2sortable",function(){s.select2SortableOrder()})}})}else{if(e[0],-1==o.inArray(e[0],validMethods))throw"Unknown method: "+e[0];"destroy"===e[0]&&$this.select2SortableDestroy()}return $this},select2SortableDestroy:function(){var e=this.filter("[multiple]");return e.each(function(){var e=o(this),t=e.parent().find(".select2-choices");e.closest("form").unbind("submit.select2sortable"),t.unbind("sortstop.select2sortable"),t.sortable("destroy")}),e}})}(jQuery);